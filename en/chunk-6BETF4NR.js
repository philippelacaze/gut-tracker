import{b as Ee,e as Se}from"./chunk-N5TZAXKZ.js";import{a as Te}from"./chunk-Z2OQZVNV.js";import"./chunk-GXFCDELP.js";import"./chunk-RSMFD7K5.js";import"./chunk-C5UECEMN.js";import"./chunk-PY5CWWVX.js";import{a as H}from"./chunk-BEQMUVEW.js";import"./chunk-NNJYJRZJ.js";import"./chunk-AC2FD5IL.js";import{$a as s,Ab as V,Bb as q,C as ee,Cb as ue,Db as D,I as N,Ja as f,N as C,O as P,Pa as h,Qa as S,Ra as T,Sa as B,T as te,Ua as x,Va as A,Wa as Y,Xa as _,Ya as m,Za as U,_ as E,_a as l,aa as ne,ab as X,bb as b,cb as j,db as k,eb as z,fb as d,gb as v,hb as R,ib as p,l as pe,mb as ye,nb as ge,pb as F,qb as I,sb as c,tb as y,ub as O,wa as de,xb as $,za as i}from"./chunk-GWGL4R4C.js";import"./chunk-5NWPNMTQ.js";function Me(n,e){let o=!e?.manualCleanup?e?.injector?.get(te)??N(te):null,r=Ce(e?.equal),a;e?.requireSync?a=E({kind:0},{equal:r}):a=E({kind:1,value:e?.initialValue},{equal:r});let g,L=n.subscribe({next:M=>a.set({kind:1,value:M}),error:M=>{a.set({kind:2,error:M}),g?.();},complete:()=>{g?.();}});if(e?.requireSync&&a().kind===0)throw new ee(601,!1);return g=o?.onDestroy(L.unsubscribe.bind(L)),$(()=>{let M=a();switch(M.kind){case 1:return M.value;case 2:throw M.error;case 0:throw new ee(601,!1);}},{equal:e?.equal});}function Ce(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value);}var Pe=["mapContainer"];function be(n,e){if(n&1){let t=b();l(0,"div",7,0),R("click",function(r){C(t);let a=p();return P(a.onContainerClick(r));}),s();}if(n&2){let t=p();j("innerHTML",t.svgContent(),de);}}function ve(n,e){n&1&&(l(0,"div",5)(1,"span"),d(2,1),s()());}function Re(n,e){if(n&1&&(l(0,"p",6)(1,"span"),d(2,2),s(),l(3,"strong"),c(4),s()()),n&2){let t=p();i(4),y(t.selectedRegionLabel());}}var Oe={head:"Head",thorax:"Chest","abdomen-upper":"Upper abdomen","abdomen-left":"Left abdomen","abdomen-right":"Right abdomen","abdomen-lower":"Lower abdomen",pelvis:"Pelvis","left-arm":"Left arm","right-arm":"Right arm","left-leg":"Left leg","right-leg":"Right leg"},K=class n{selectedRegion=q(null);locationSelected=V();_http=N(Ee);_sanitizer=N(Se);_container=ue("mapContainer");svgContent=Me(this._http.get("body-map/body-map.svg",{responseType:"text"}).pipe(pe(e=>this._sanitizer.bypassSecurityTrustHtml(e))),{initialValue:null});_svgReady=E(!1);constructor(){ne(()=>{let e=this.selectedRegion();this.svgContent()&&queueMicrotask(()=>this._updateActiveZone(e));});}selectedRegionLabel(){let e=this.selectedRegion();return e?Oe[e]??e:null;}onContainerClick(e){let o=e.target.closest("[data-region]");if(!o)return;let r=o.getAttribute("data-region");if(!r)return;let a=this._container()?.nativeElement;if(!a)return;let g=a.getBoundingClientRect(),L=Math.round((e.clientX-g.left)/g.width*100),M=Math.round((e.clientY-g.top)/g.height*100);this.locationSelected.emit({x:L,y:M,region:r});}_updateActiveZone(e){let t=this._container()?.nativeElement;t&&(t.querySelectorAll("[data-region]").forEach(o=>{o.classList.remove("body-zone--active");}),e&&t.querySelector(`[data-region="${e}"]`)?.classList.add("body-zone--active"));}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-body-map"]],viewQuery:function(t,o){t&1&&ye(o._container,Pe,5),t&2&&ge();},inputs:{selectedRegion:[1,"selectedRegion"]},outputs:{locationSelected:"locationSelected"},decls:4,vars:2,consts:()=>{let e;e="Body map \u2014 click to select an area";let t;t="Loading\u2026";let o;return o="Selected area:",[["mapContainer",""],t,o,[1,"body-map"],["role","group","aria-label",e,1,"body-map__svg-container",3,"innerHTML"],["aria-busy","true",1,"body-map__loading"],["aria-live","polite",1,"body-map__selected-label"],["role","group","aria-label",e,1,"body-map__svg-container",3,"click","innerHTML"]];},template:function(t,o){t&1&&(l(0,"div",3),S(1,be,2,1,"div",4)(2,ve,3,0,"div",5),S(3,Re,5,1,"p",6),s()),t&2&&(i(),T(o.svgContent()?1:2),i(2),T(o.selectedRegionLabel()?3:-1));},styles:[".body-map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.body-map__svg-container[_ngcontent-%COMP%]{width:100%;max-width:200px;cursor:pointer}.body-map__svg-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]){cursor:pointer;transition:fill .15s}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]):hover{fill:#1976d233}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]).body-zone--active{fill:#1976d266!important}.body-map__loading[_ngcontent-%COMP%]{height:200px;display:flex;align-items:center;justify-content:center;color:var(--color-text-muted, #aaa);font-size:.9rem;font-style:italic}.body-map__selected-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary, #555);text-align:center;margin:0}.body-map__selected-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-primary, #1976d2)}"],changeDetection:0});};function Ne(n){return n<=3?{emoji:"\u{1F60C}",color:"#4caf50",label:"Very mild"}:n<=5?{emoji:"\u{1F610}",color:"#8bc34a",label:"Mild"}:n<=6?{emoji:"\u{1F623}",color:"#ff9800",label:"Moderate"}:n<=8?{emoji:"\u{1F630}",color:"#f44336",label:"Severe"}:{emoji:"\u{1F631}",color:"#b71c1c",label:"Very severe"};}var Z=class n{severity=D.required();theme=$(()=>Ne(this.severity()));onSliderChange(e){let t=Number(e.target.value);this.severity.set(t);}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-severity-slider"]],inputs:{severity:[1,"severity"]},outputs:{severity:"severityChange"},decls:19,vars:11,consts:()=>{let e;e="Severity level from 1 to 10";let t;t=" Severity ";let o;o="1";let r;r="5";let a;return a="10",[t,o,r,a,[1,"severity-slider"],[1,"severity-slider__header"],["for","severity-input",1,"severity-slider__label"],[1,"severity-slider__value"],["aria-hidden","true",1,"severity-slider__emoji"],["aria-live","polite",1,"severity-slider__number"],["id","severity-input","type","range","min","1","max","10","step","1","aria-label",e,1,"severity-slider__range",3,"input","value"],["aria-hidden","true",1,"severity-slider__scale"],[1,"severity-slider__description"]];},template:function(t,o){t&1&&(l(0,"div",4)(1,"div",5)(2,"label",6),d(3,0),s(),l(4,"div",7)(5,"span",8),c(6),s(),l(7,"span",9),c(8),s()()(),l(9,"input",10),R("input",function(a){return o.onSliderChange(a);}),s(),l(10,"div",11)(11,"span"),d(12,1),s(),l(13,"span"),d(14,2),s(),l(15,"span"),d(16,3),s()(),l(17,"p",12),c(18),s()()),t&2&&(i(6),y(o.theme().emoji),i(),F("color",o.theme().color),h("aria-label",o.theme().label),i(),O("",o.severity(),"/10"),i(),F("--severity-color",o.theme().color),j("value",o.severity()),i(8),F("color",o.theme().color),i(),O(" ",o.theme().label," "));},styles:[".severity-slider[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.severity-slider__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.severity-slider__label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #555)}.severity-slider__value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.severity-slider__emoji[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1}.severity-slider__number[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;transition:color .2s;min-width:48px;text-align:right}.severity-slider__range[_ngcontent-%COMP%]{--severity-color: #4caf50;width:100%;height:6px;appearance:none;border-radius:3px;background:linear-gradient(to right,var(--severity-color) 0%,var(--severity-color) calc((var(--value, 5) - 1) / 9 * 100%),#e0e0e0 calc((var(--value, 5) - 1) / 9 * 100%));cursor:pointer;outline:none}.severity-slider__range[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:var(--severity-color);border:2px solid #fff;box-shadow:0 1px 4px #0003;cursor:pointer;transition:background .2s}.severity-slider__range[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:var(--severity-color);border:2px solid #fff;box-shadow:0 1px 4px #0003;cursor:pointer}.severity-slider__scale[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:var(--color-text-muted, #aaa);padding:0 2px}.severity-slider__description[_ngcontent-%COMP%]{font-size:.8rem;font-style:italic;margin:0;text-align:center;transition:color .2s}"],changeDetection:0});};var he=(n,e)=>e.value;function xe(n,e){if(n&1){let t=b();l(0,"button",6),R("click",function(){let r=C(t).$implicit,a=p();return P(a.select(r.value));}),X(1,"span",7),l(2,"span",8),c(3),s(),l(4,"span",9),c(5),s(),X(6,"span",10),s();}if(n&2){let t=e.$implicit,o=p();F("--bristol-color",t.color),I("bristol-picker__btn--selected",o.scale()===t.value),h("aria-pressed",o.scale()===t.value)("aria-label","Bristol "+t.value+" \u2013 "+t.label),i(3),y(t.value),i(2),y(t.label);}}var J=class n{scale=D.required();options=[{value:1,label:"Very hard",color:"#5c3317"},{value:2,label:"Lumpy",color:"#8b5e3c"},{value:3,label:"Cracked",color:"#4a7c59"},{value:4,label:"Smooth",color:"#2e7d32"},{value:5,label:"Soft pieces",color:"#c8a800"},{value:6,label:"Mushy",color:"#e67e22"},{value:7,label:"Liquid",color:"#c0392b"}];select(e){this.scale.set(this.scale()===e?null:e);}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-bristol-scale-picker"]],inputs:{scale:[1,"scale"]},outputs:{scale:"scaleChange"},decls:7,vars:0,consts:()=>{let e;return e="Bristol Scale "+"\uFFFD#3\uFFFD"+"(optional \u2014 tap to select)"+"\uFFFD/#3\uFFFD"+"",[e,[1,"bristol-picker"],[1,"bristol-picker__legend"],[1,"bristol-picker__hint"],["role","group",1,"bristol-picker__list"],["type","button",1,"bristol-picker__btn",3,"bristol-picker__btn--selected","--bristol-color"],["type","button",1,"bristol-picker__btn",3,"click"],["aria-hidden","true",1,"bristol-picker__swatch"],["aria-hidden","true",1,"bristol-picker__number"],[1,"bristol-picker__label"],["aria-hidden","true",1,"bristol-picker__indicator"]];},template:function(t,o){t&1&&(l(0,"fieldset",1)(1,"legend",2),k(2,0),X(3,"span",3),z(),s(),l(4,"div",4),x(5,xe,7,8,"button",5,he),s()()),t&2&&(i(5),A(o.options));},styles:['@charset "UTF-8";.bristol-picker[_ngcontent-%COMP%]{border:none;padding:0;margin:0}.bristol-picker__legend[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #666);margin-bottom:.5rem}.bristol-picker__hint[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400;color:var(--color-text-tertiary, #999)}.bristol-picker__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem}.bristol-picker__btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.75rem;width:100%;min-height:3rem;padding:.5rem .75rem;border:2px solid var(--color-border, #e0e0e0);border-radius:.5rem;background:var(--color-surface, #f9f9f9);cursor:pointer;text-align:left;transition:border-color .15s,background .15s}.bristol-picker__btn[_ngcontent-%COMP%]:hover{border-color:var(--bristol-color);background:color-mix(in srgb,var(--bristol-color) 8%,var(--color-surface, #f9f9f9))}.bristol-picker__btn[_ngcontent-%COMP%]:active{background:color-mix(in srgb,var(--bristol-color) 18%,var(--color-surface, #f9f9f9))}.bristol-picker__btn--selected[_ngcontent-%COMP%]{border-color:var(--bristol-color);background:color-mix(in srgb,var(--bristol-color) 12%,var(--color-surface, #f9f9f9))}.bristol-picker__btn--selected[_ngcontent-%COMP%]   .bristol-picker__indicator[_ngcontent-%COMP%]{background:var(--bristol-color);border-color:var(--bristol-color)}.bristol-picker__btn--selected[_ngcontent-%COMP%]   .bristol-picker__indicator[_ngcontent-%COMP%]:after{opacity:1}.bristol-picker__btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--bristol-color);outline-offset:2px}.bristol-picker__swatch[_ngcontent-%COMP%]{width:5px;height:2rem;border-radius:3px;background:var(--bristol-color);flex-shrink:0}.bristol-picker__number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;line-height:1;color:var(--bristol-color);width:1.5rem;flex-shrink:0;text-align:center}.bristol-picker__label[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:var(--color-text, #222)}.bristol-picker__indicator[_ngcontent-%COMP%]{position:relative;width:1.25rem;height:1.25rem;border:2px solid var(--color-border, #ccc);border-radius:50%;flex-shrink:0;transition:background .15s,border-color .15s}.bristol-picker__indicator[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:3px;border-radius:50%;background:#fff;opacity:0;transition:opacity .15s}'],changeDetection:0});};function Ae(n,e){if(n&1&&(l(0,"span",11),c(1),s()),n&2){let t=p().$implicit;i(),O(" \u{1F4CD} ",t.location.region," ");}}function Ye(n,e){if(n&1&&(l(0,"span",12),c(1),s()),n&2){let t=p().$implicit,o=p();i(),y(o.bristolLabel(t.bristolScale));}}function $e(n,e){if(n&1&&(l(0,"span",13),c(1),s()),n&2){let t=p().$implicit;i(),y(t.note);}}function Le(n,e){if(n&1&&(l(0,"li",6)(1,"span",8),c(2),s(),l(3,"span",9),c(4),s(),l(5,"span",10),c(6),s(),S(7,Ae,2,1,"span",11),S(8,Ye,2,1,"span",12),S(9,$e,2,1,"span",13),s()),n&2){let t=e.$implicit,o=p();i(2),y(o.typeIcon(t.type)),i(2),y(o.typeLabel(t.type)),i(),I("symptom-card__severity--low",t.severity<=3)("symptom-card__severity--medium",t.severity>=4&&t.severity<=6)("symptom-card__severity--high",t.severity>=7),h("aria-label","S\xE9v\xE9rit\xE9 "+t.severity+"/10"),i(),O(" ",t.severity,"/10 "),i(),T(t.location?7:-1),i(),T(t.bristolScale?8:-1),i(),T(t.note?9:-1);}}function Fe(n,e){n&1&&(l(0,"li",7),d(1,0),s());}var Ie={pain:"Pain",bloating:"Bloating",gas:"Gas",belching:"Belching",stool:"Stools",headache:"Headache",other:"Other"},De={pain:"\u{1F915}",bloating:"\u{1FAC3}",gas:"\u{1F4A8}",belching:"\u{1F62E}\u200D\u{1F4A8}",stool:"\u{1F6BD}",headache:"\u{1F92F}",other:"\u2753"},ke={1:"Very hard",2:"Lumpy",3:"Cracked",4:"Smooth",5:"Soft pieces",6:"Mushy",7:"Liquid"},Q=class n{entry=q.required();deleted=V();_store=N(H);timeLabel=$(()=>new Date(this.entry().timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}));typeLabel(e){return Ie[e];}typeIcon(e){return De[e];}bristolLabel(e){return`Bristol ${e} \u2013 ${ke[e]}`;}async onDelete(){try{await this._store.remove(this.entry().id),this.deleted.emit(this.entry().id);}catch(e){console.error("[SymptomEntryCard] Erreur lors de la suppression",e);}}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-symptom-entry-card"]],inputs:{entry:[1,"entry"]},outputs:{deleted:"deleted"},decls:10,vars:3,consts:()=>{let e;e="Delete this entry";let t;t="Symptoms in this entry";let o;return o=" No symptom recorded ",[o,[1,"symptom-card"],[1,"symptom-card__header"],[1,"symptom-card__time"],["type","button","aria-label",e,1,"symptom-card__delete-btn",3,"click"],["aria-label",t,1,"symptom-card__list"],[1,"symptom-card__item"],[1,"symptom-card__empty"],["aria-hidden","true",1,"symptom-card__icon"],[1,"symptom-card__type"],[1,"symptom-card__severity"],[1,"symptom-card__location"],[1,"symptom-card__bristol"],[1,"symptom-card__note"]];},template:function(t,o){t&1&&(l(0,"article",1)(1,"header",2)(2,"time",3),c(3),s(),l(4,"button",4),R("click",function(){return o.onDelete();}),c(5," \u2715 "),s()(),l(6,"ul",5),x(7,Le,10,13,"li",6,B,!1,Fe,2,0,"li",7),s()()),t&2&&(i(2),h("datetime",o.entry().timestamp),i(),O(" ",o.timeLabel()," "),i(4),A(o.entry().symptoms));},styles:[".symptom-card[_ngcontent-%COMP%]{background:var(--color-surface, #fff);border:1px solid var(--color-border, #e0e0e0);border-radius:12px;padding:16px}.symptom-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.symptom-card__time[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary, #666);font-weight:500}.symptom-card__delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--color-text-muted, #aaa);font-size:1rem;padding:4px 8px;border-radius:4px}.symptom-card__delete-btn[_ngcontent-%COMP%]:hover{color:var(--color-danger, #f44336);background:var(--color-danger-light, #fdecea)}.symptom-card__list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.symptom-card__item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.symptom-card__icon[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1}.symptom-card__type[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem}.symptom-card__severity[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;padding:2px 8px;border-radius:10px}.symptom-card__severity--low[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.symptom-card__severity--medium[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.symptom-card__severity--high[_ngcontent-%COMP%]{background:#fdecea;color:#c62828}.symptom-card__location[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary, #777);font-style:italic}.symptom-card__note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted, #999);font-style:italic;width:100%;padding-left:24px}.symptom-card__empty[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted, #bbb);font-style:italic}"],changeDetection:0});};var ze=(n,e)=>e.value;function we(n,e){if(n&1){let t=b();l(0,"button",2),R("click",function(){let r=C(t).$implicit,a=p();return P(a.select(r.value));}),l(1,"span",3),c(2),s(),l(3,"span",4),c(4),s()();}if(n&2){let t=e.$implicit,o=p();I("symptom-type-picker__chip--selected",o.selected()===t.value),h("aria-pressed",o.selected()===t.value)("aria-label",t.label),i(2),y(t.icon),i(2),y(t.label);}}var W=class n{selected=D.required();symptomTypes=[{value:"pain",label:"Pain",icon:"\u{1F915}"},{value:"bloating",label:"Bloating",icon:"\u{1FAC3}"},{value:"gas",label:"Gas",icon:"\u{1F4A8}"},{value:"belching",label:"Belching",icon:"\u{1F62E}\u200D\u{1F4A8}"},{value:"stool",label:"Stools",icon:"\u{1F6BD}"},{value:"headache",label:"Headache",icon:"\u{1F92F}"},{value:"other",label:"Other",icon:"\u2753"}];select(e){this.selected.set(e);}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-symptom-type-picker"]],inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange"},decls:3,vars:0,consts:()=>{let e;return e="Symptom type",[["role","group","aria-label",e,1,"symptom-type-picker"],["type","button",1,"symptom-type-picker__chip",3,"symptom-type-picker__chip--selected"],["type","button",1,"symptom-type-picker__chip",3,"click"],["aria-hidden","true",1,"symptom-type-picker__icon"],[1,"symptom-type-picker__label"]];},template:function(t,o){t&1&&(l(0,"div",0),x(1,we,5,6,"button",1,ze),s()),t&2&&(i(),A(o.symptomTypes));},styles:[".symptom-type-picker[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.symptom-type-picker__chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:1px solid var(--color-border, #ddd);border-radius:20px;background:var(--color-surface, #fff);font-size:.85rem;cursor:pointer;transition:background .15s,border-color .15s}.symptom-type-picker__chip--selected[_ngcontent-%COMP%]{background:var(--color-primary, #1976d2);border-color:var(--color-primary, #1976d2);color:#fff}.symptom-type-picker__icon[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1}.symptom-type-picker__label[_ngcontent-%COMP%]{font-weight:500}"],changeDetection:0});};var Ge=(n,e)=>e.id;function Be(n,e){if(n&1){let t=b();_(0,"div",15)(1,"gt-bristol-scale-picker",31),v("scaleChange",function(r){C(t);let a=p();return P(a.onBristolScaleChange(r));}),m()();}if(n&2){let t=p();i(),Y("scale",t.currentBristolScale());}}function Ue(n,e){if(n&1&&(_(0,"span",38),c(1),m()),n&2){let t=p().$implicit;i(),O(" \u{1F4CD} ",t.location.region," ");}}function Xe(n,e){if(n&1){let t=b();_(0,"li",34)(1,"span",36),c(2),m(),_(3,"span",37),c(4),m(),S(5,Ue,2,1,"span",38),_(6,"button",39),v("click",function(){let r=C(t).$index,a=p(2);return P(a.removePendingSymptom(r));}),c(7," \u2715 "),m()();}if(n&2){let t=e.$implicit;i(2),y(t.type),i(2),O("",t.severity,"/10"),i(),T(t.location?5:-1);}}function je(n,e){n&1&&(_(0,"span"),d(1,7),m());}function Ve(n,e){n&1&&(_(0,"span"),d(1,8),m());}function qe(n,e){if(n&1){let t=b();_(0,"section",24)(1,"h2",32),d(2,6),m(),_(3,"ul",33),x(4,Xe,8,3,"li",34,B),m(),_(6,"button",35),v("click",function(){C(t);let r=p();return P(r.saveEntry());}),S(7,je,2,0,"span")(8,Ve,2,0,"span"),m()();}if(n&2){let t=p();i(4),A(t.pendingSymptoms()),i(2),Y("disabled",t.saving()),i(),T(t.saving()?7:8);}}function He(n,e){n&1&&(_(0,"p",28),d(1,9),m());}function Ke(n,e){n&1&&(_(0,"p",29),d(1,10),m());}function Ze(n,e){if(n&1&&U(0,"gt-symptom-entry-card",40),n&2){let t=e.$implicit;Y("entry",t);}}function Je(n,e){if(n&1&&(_(0,"div",30),x(1,Ze,1,1,"gt-symptom-entry-card",40,Ge),m()),n&2){let t=p();i(),A(t.todayEntries());}}var fe=class n{_store=N(H);_currentType=E("pain");_currentSeverity=E(5);_currentLocation=E(null);_currentNote=E("");_currentBristolScale=E(null);_pendingSymptoms=E([]);_saving=E(!1);currentType=this._currentType.asReadonly();currentSeverity=this._currentSeverity.asReadonly();currentLocation=this._currentLocation.asReadonly();currentNote=this._currentNote.asReadonly();currentBristolScale=this._currentBristolScale.asReadonly();pendingSymptoms=this._pendingSymptoms.asReadonly();saving=this._saving.asReadonly();loading=this._store.loading;todayEntries=this._store.todayEntries;canSave=$(()=>this._pendingSymptoms().length>0);onTypeChange(e){this._currentType.set(e),e!=="pain"&&this._currentLocation.set(null),e!=="stool"&&this._currentBristolScale.set(null);}onBristolScaleChange(e){this._currentBristolScale.set(e);}onSeverityChange(e){this._currentSeverity.set(e);}onLocationSelected(e){this._currentLocation.set(e);}onNoteInput(e){this._currentNote.set(e.target.value);}addSymptom(){let e=this._currentType(),t={type:e,severity:this._currentSeverity(),location:this._currentLocation()??void 0,note:this._currentNote().trim()||void 0,bristolScale:e==="stool"?this._currentBristolScale()??void 0:void 0};this._pendingSymptoms.update(o=>[...o,t]),this._currentType.set("pain"),this._currentSeverity.set(5),this._currentLocation.set(null),this._currentNote.set(""),this._currentBristolScale.set(null);}removePendingSymptom(e){this._pendingSymptoms.update(t=>t.filter((o,r)=>r!==e));}onVoiceResult(e){e.data.symptoms.forEach(o=>{let r=[o.note,o.locationHint?`Zone : ${o.locationHint}`:null].filter(Boolean).join(" \u2014 ")||void 0;this._pendingSymptoms.update(a=>[...a,{type:o.type,severity:o.severity,note:r}]);});}async saveEntry(){if(this.canSave()){this._saving.set(!0);try{let e={id:crypto.randomUUID(),timestamp:new Date().toISOString(),symptoms:this._pendingSymptoms()};await this._store.add(e),this._pendingSymptoms.set([]);}catch(e){console.error("[SymptomEntryPage] Erreur lors de la sauvegarde",e);}finally{this._saving.set(!1);}}}static ɵfac=function(t){return new(t||n)();};static ɵcmp=f({type:n,selectors:[["gt-symptom-entry-page"]],decls:33,vars:8,consts:()=>{let e;e="New symptom";let t;t="Free note for this symptom";let o;o="Details\u2026";let r;r="Symptoms to save";let a;a="Today's symptom journal";let g;g=" Symptom entry ";let L;L=" Symptom type ";let M;M=" Location "+"\uFFFD#15\uFFFD"+"(optional)"+"\uFFFD/#15\uFFFD"+"";let oe;oe=" Note "+"\uFFFD#20\uFFFD"+"(optional)"+"\uFFFD/#20\uFFFD"+"";let ie;ie="+ Add this symptom";let re;re=" Today ";let ae;ae=" To save ";let le;le="Remove this symptom";let se;se="Saving\u2026";let _e;_e="Save entry";let me;me="Loading\u2026";let ce;return ce=" No symptoms recorded today. ",[g,L,M,oe,ie,re,ae,se,_e,me,ce,[1,"symptom-entry-page"],[1,"symptom-entry-page__header"],[1,"symptom-entry-page__title"],["aria-label",e,1,"symptom-entry-page__form"],[1,"symptom-entry-page__field"],[1,"symptom-entry-page__field-label"],[3,"selectedChange","selected"],[3,"severityChange","severity"],[1,"symptom-entry-page__optional"],[3,"locationSelected","selectedRegion"],["for","symptom-note",1,"symptom-entry-page__field-label"],["id","symptom-note","type","text","aria-label",t,"placeholder",o,1,"symptom-entry-page__note-input",3,"input","value"],["type","button",1,"symptom-entry-page__add-btn",3,"click"],["aria-label",r,1,"symptom-entry-page__pending"],[3,"parseResultReady","context"],["aria-label",a,1,"symptom-entry-page__journal"],[1,"symptom-entry-page__journal-title"],[1,"symptom-entry-page__loading"],[1,"symptom-entry-page__empty"],[1,"symptom-entry-page__entries"],[3,"scaleChange","scale"],[1,"symptom-entry-page__pending-title"],[1,"symptom-entry-page__pending-list"],[1,"symptom-entry-page__pending-item"],["type","button",1,"symptom-entry-page__save-btn",3,"click","disabled"],[1,"symptom-entry-page__pending-type"],[1,"symptom-entry-page__pending-severity"],[1,"symptom-entry-page__pending-location"],["type","button","aria-label",le,1,"symptom-entry-page__pending-remove",3,"click"],[3,"entry"]];},template:function(t,o){if(t&1&&(_(0,"main",11)(1,"header",12)(2,"h1",13),d(3,0),m()(),_(4,"section",14)(5,"div",15)(6,"span",16),d(7,1),m(),_(8,"gt-symptom-type-picker",17),v("selectedChange",function(a){return o.onTypeChange(a);}),m()(),S(9,Be,2,1,"div",15),_(10,"div",15)(11,"gt-severity-slider",18),v("severityChange",function(a){return o.onSeverityChange(a);}),m()(),_(12,"div",15)(13,"span",16),k(14,2),U(15,"span",19),z(),m(),_(16,"gt-body-map",20),v("locationSelected",function(a){return o.onLocationSelected(a);}),m()(),_(17,"div",15)(18,"label",21),k(19,3),U(20,"span",19),z(),m(),_(21,"input",22),v("input",function(a){return o.onNoteInput(a);}),m()(),_(22,"button",23),v("click",function(){return o.addSymptom();}),_(23,"span"),d(24,4),m()()(),S(25,qe,9,2,"section",24),_(26,"gt-voice-input",25),v("parseResultReady",function(a){return o.onVoiceResult(a);}),m(),_(27,"section",26)(28,"h2",27),d(29,5),m(),S(30,He,2,0,"p",28)(31,Ke,2,0,"p",29)(32,Je,3,0,"div",30),m()()),t&2){let r;i(8),Y("selected",o.currentType()),i(),T(o.currentType()==="stool"?9:-1),i(2),Y("severity",o.currentSeverity()),i(5),Y("selectedRegion",((r=o.currentLocation())==null?null:r.region)??null),i(5),Y("value",o.currentNote()),i(4),T(o.pendingSymptoms().length>0?25:-1),i(),Y("context","symptom"),i(4),T(o.loading()?30:o.todayEntries().length===0?31:32);}},dependencies:[K,J,Z,W,Q,Te],styles:[".symptom-entry-page[_ngcontent-%COMP%]{padding:16px;max-width:640px;margin:0 auto;display:flex;flex-direction:column;gap:32px}.symptom-entry-page__header[_ngcontent-%COMP%]{padding-bottom:8px;border-bottom:1px solid var(--color-border, #e0e0e0)}.symptom-entry-page__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0}.symptom-entry-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.symptom-entry-page__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.symptom-entry-page__field-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #555)}.symptom-entry-page__optional[_ngcontent-%COMP%]{font-weight:400;color:var(--color-text-muted, #999)}.symptom-entry-page__note-input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid var(--color-border, #ddd);border-radius:8px;font-size:1rem}.symptom-entry-page__note-input[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary, #1976d2);outline-offset:1px}.symptom-entry-page__add-btn[_ngcontent-%COMP%]{align-self:flex-start;padding:10px 20px;background:var(--color-surface, #fff);color:var(--color-primary, #1976d2);border:2px solid var(--color-primary, #1976d2);border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .15s}.symptom-entry-page__add-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-light, #e3f2fd)}.symptom-entry-page__pending[_ngcontent-%COMP%]{background:var(--color-surface-alt, #f9f9f9);border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px}.symptom-entry-page__pending-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0}.symptom-entry-page__pending-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.symptom-entry-page__pending-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.symptom-entry-page__pending-type[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.symptom-entry-page__pending-severity[_ngcontent-%COMP%]{font-size:.8rem;background:#f5f5f5;padding:2px 8px;border-radius:8px}.symptom-entry-page__pending-location[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted, #999);font-style:italic}.symptom-entry-page__pending-remove[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;cursor:pointer;color:var(--color-text-muted, #aaa);padding:2px 6px;border-radius:4px}.symptom-entry-page__pending-remove[_ngcontent-%COMP%]:hover{color:var(--color-danger, #f44336)}.symptom-entry-page__save-btn[_ngcontent-%COMP%]{align-self:flex-start;padding:12px 28px;background:var(--color-primary, #1976d2);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}.symptom-entry-page__save-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.symptom-entry-page__journal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.symptom-entry-page__journal-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0}.symptom-entry-page__loading[_ngcontent-%COMP%], .symptom-entry-page__empty[_ngcontent-%COMP%]{color:var(--color-text-muted, #999);font-style:italic;font-size:.9rem}.symptom-entry-page__entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}"],changeDetection:0});};export{fe as SymptomEntryPageComponent};/**i18n:185be897c39810308387c12f12d03cfc55693f2502a2b367905371172c1f632a*/