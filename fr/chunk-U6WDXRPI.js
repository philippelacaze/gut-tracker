import{b as Te,e as Me}from"./chunk-UDF4IDXI.js";import{a as be}from"./chunk-G2QOGHXP.js";import"./chunk-HOZFZYOF.js";import"./chunk-VIQWMIXL.js";import"./chunk-FYP4C75K.js";import"./chunk-JGYPQ263.js";import{a as H}from"./chunk-GLDW7I7T.js";import"./chunk-7OXGPYUD.js";import"./chunk-LNHMT4MH.js";import{$a as s,Bb as V,C as ee,Cb as q,Db as Se,Eb as D,I as h,Ja as b,N as C,O as P,Pa as N,Qa as u,Ra as E,Sa as B,T as te,Ua as x,Va as A,Wa as $,Xa as c,Ya as m,Za as U,_ as T,_a as l,aa as ne,ab as X,bb as v,cb as j,db as z,eb as k,fb as d,gb as R,hb as O,ib as _,l as de,mb as ge,nb as ue,pb as I,qb as F,sb as p,tb as S,ub as f,vb as Ee,wa as ye,yb as Y,za as i}from"./chunk-WRWDFJ7O.js";import{c as pe}from"./chunk-4QSGCX7C.js";function fe(o,e){let n=!e?.manualCleanup?e?.injector?.get(te)??h(te):null,r=Pe(e?.equal),a;e?.requireSync?a=T({kind:0},{equal:r}):a=T({kind:1,value:e?.initialValue},{equal:r});let y,L=o.subscribe({next:M=>a.set({kind:1,value:M}),error:M=>{a.set({kind:2,error:M}),y?.();},complete:()=>{y?.();}});if(e?.requireSync&&a().kind===0)throw new ee(601,!1);return y=n?.onDestroy(L.unsubscribe.bind(L)),Y(()=>{let M=a();switch(M.kind){case 1:return M.value;case 2:throw M.error;case 0:throw new ee(601,!1);}},{equal:e?.equal});}function Pe(o=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&o(e.value,t.value);}var ve=["mapContainer"];function Re(o,e){if(o&1){let t=v();l(0,"div",7,0),O("click",function(r){C(t);let a=_();return P(a.onContainerClick(r));}),s();}if(o&2){let t=_();j("innerHTML",t.svgContent(),ye);}}function Oe(o,e){o&1&&(l(0,"div",5)(1,"span"),d(2,1),s()());}function he(o,e){if(o&1&&(l(0,"p",6)(1,"span"),d(2,2),s(),l(3,"strong"),p(4),s()()),o&2){let t=_();i(4),S(t.selectedRegionLabel());}}var Ne={head:"T\xEAte",thorax:"Thorax","abdomen-upper":"Abdomen haut","abdomen-left":"Abdomen gauche","abdomen-right":"Abdomen droit","abdomen-lower":"Abdomen bas",pelvis:"Pelvis","left-arm":"Bras gauche","right-arm":"Bras droit","left-leg":"Jambe gauche","right-leg":"Jambe droite"},J=class o{selectedRegion=q(null);locationSelected=V();_http=h(Te);_sanitizer=h(Me);_container=Se("mapContainer");svgContent=fe(this._http.get("body-map/body-map.svg",{responseType:"text"}).pipe(de(e=>this._sanitizer.bypassSecurityTrustHtml(e))),{initialValue:null});_svgReady=T(!1);constructor(){ne(()=>{let e=this.selectedRegion();this.svgContent()&&queueMicrotask(()=>this._updateActiveZone(e));});}selectedRegionLabel(){let e=this.selectedRegion();return e?Ne[e]??e:null;}onContainerClick(e){let n=e.target.closest("[data-region]");if(!n)return;let r=n.getAttribute("data-region");if(!r)return;let a=this._container()?.nativeElement;if(!a)return;let y=a.getBoundingClientRect(),L=Math.round((e.clientX-y.left)/y.width*100),M=Math.round((e.clientY-y.top)/y.height*100);this.locationSelected.emit({x:L,y:M,region:r});}_updateActiveZone(e){let t=this._container()?.nativeElement;t&&(t.querySelectorAll("[data-region]").forEach(n=>{n.classList.remove("body-zone--active");}),e&&t.querySelector(`[data-region="${e}"]`)?.classList.add("body-zone--active"));}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-body-map"]],viewQuery:function(t,n){t&1&&ge(n._container,ve,5),t&2&&ue();},inputs:{selectedRegion:[1,"selectedRegion"]},outputs:{locationSelected:"locationSelected"},decls:4,vars:2,consts:()=>{let e;e="Carte corporelle \u2014 cliquez pour s\xE9lectionner une zone";let t;t="Chargement\u2026";let n;return n="Zone s\xE9lectionn\xE9e :",[["mapContainer",""],t,n,[1,"body-map"],["role","group","aria-label",e,1,"body-map__svg-container",3,"innerHTML"],["aria-busy","true",1,"body-map__loading"],["aria-live","polite",1,"body-map__selected-label"],["role","group","aria-label",e,1,"body-map__svg-container",3,"click","innerHTML"]];},template:function(t,n){t&1&&(l(0,"div",3),u(1,Re,2,1,"div",4)(2,Oe,3,0,"div",5),u(3,he,5,1,"p",6),s()),t&2&&(i(),E(n.svgContent()?1:2),i(2),E(n.selectedRegionLabel()?3:-1));},styles:[".body-map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.body-map__svg-container[_ngcontent-%COMP%]{width:100%;max-width:200px;cursor:pointer}.body-map__svg-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]){cursor:pointer;transition:fill .15s}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]):hover{fill:#1976d233}.body-map__svg-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global([data-region]).body-zone--active{fill:#1976d266!important}.body-map__loading[_ngcontent-%COMP%]{height:200px;display:flex;align-items:center;justify-content:center;color:var(--color-text-muted, #aaa);font-size:.9rem;font-style:italic}.body-map__selected-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary, #555);text-align:center;margin:0}.body-map__selected-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-primary, #1976d2)}"],changeDetection:0});};function xe(o){return o<=3?{emoji:"\u{1F60C}",color:"#4caf50",label:"Tr\xE8s l\xE9ger"}:o<=5?{emoji:"\u{1F610}",color:"#8bc34a",label:"L\xE9ger"}:o<=6?{emoji:"\u{1F623}",color:"#ff9800",label:"Mod\xE9r\xE9"}:o<=8?{emoji:"\u{1F630}",color:"#f44336",label:"Intense"}:{emoji:"\u{1F631}",color:"#b71c1c",label:"Tr\xE8s intense"};}var K=class o{severity=D.required();theme=Y(()=>xe(this.severity()));onSliderChange(e){let t=Number(e.target.value);this.severity.set(t);}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-severity-slider"]],inputs:{severity:[1,"severity"]},outputs:{severity:"severityChange"},decls:19,vars:11,consts:()=>{let e;e="Niveau de s\xE9v\xE9rit\xE9 de 1 \xE0 10";let t;t=" S\xE9v\xE9rit\xE9 ";let n;n="1";let r;r="5";let a;return a="10",[t,n,r,a,[1,"severity-slider"],[1,"severity-slider__header"],["for","severity-input",1,"severity-slider__label"],[1,"severity-slider__value"],["aria-hidden","true",1,"severity-slider__emoji"],["aria-live","polite",1,"severity-slider__number"],["id","severity-input","type","range","min","1","max","10","step","1","aria-label",e,1,"severity-slider__range",3,"input","value"],["aria-hidden","true",1,"severity-slider__scale"],[1,"severity-slider__description"]];},template:function(t,n){t&1&&(l(0,"div",4)(1,"div",5)(2,"label",6),d(3,0),s(),l(4,"div",7)(5,"span",8),p(6),s(),l(7,"span",9),p(8),s()()(),l(9,"input",10),O("input",function(a){return n.onSliderChange(a);}),s(),l(10,"div",11)(11,"span"),d(12,1),s(),l(13,"span"),d(14,2),s(),l(15,"span"),d(16,3),s()(),l(17,"p",12),p(18),s()()),t&2&&(i(6),S(n.theme().emoji),i(),I("color",n.theme().color),N("aria-label",n.theme().label),i(),f("",n.severity(),"/10"),i(),I("--severity-color",n.theme().color),j("value",n.severity()),i(8),I("color",n.theme().color),i(),f(" ",n.theme().label," "));},styles:[".severity-slider[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.severity-slider__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.severity-slider__label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #555)}.severity-slider__value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.severity-slider__emoji[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1}.severity-slider__number[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;transition:color .2s;min-width:48px;text-align:right}.severity-slider__range[_ngcontent-%COMP%]{--severity-color: #4caf50;width:100%;height:6px;appearance:none;border-radius:3px;background:linear-gradient(to right,var(--severity-color) 0%,var(--severity-color) calc((var(--value, 5) - 1) / 9 * 100%),#e0e0e0 calc((var(--value, 5) - 1) / 9 * 100%));cursor:pointer;outline:none}.severity-slider__range[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:var(--severity-color);border:2px solid #fff;box-shadow:0 1px 4px #0003;cursor:pointer;transition:background .2s}.severity-slider__range[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:var(--severity-color);border:2px solid #fff;box-shadow:0 1px 4px #0003;cursor:pointer}.severity-slider__scale[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:var(--color-text-muted, #aaa);padding:0 2px}.severity-slider__description[_ngcontent-%COMP%]{font-size:.8rem;font-style:italic;margin:0;text-align:center;transition:color .2s}"],changeDetection:0});};var Ae=(o,e)=>e.value;function $e(o,e){if(o&1){let t=v();l(0,"button",6),O("click",function(){let r=C(t).$implicit,a=_();return P(a.select(r.value));}),X(1,"span",7),l(2,"span",8),p(3),s(),l(4,"span",9),p(5),s(),X(6,"span",10),s();}if(o&2){let t=e.$implicit,n=_();I("--bristol-color",t.color),F("bristol-picker__btn--selected",n.scale()===t.value),N("aria-pressed",n.scale()===t.value)("aria-label","Bristol "+t.value+" \u2013 "+t.label),i(3),S(t.value),i(2),S(t.label);}}var Z=class o{scale=D.required();options=[{value:1,label:"Tr\xE8s dur",color:"#5c3317"},{value:2,label:"Grumeleuse",color:"#8b5e3c"},{value:3,label:"Craquel\xE9e",color:"#4a7c59"},{value:4,label:"Lisse",color:"#2e7d32"},{value:5,label:"Morceaux mous",color:"#c8a800"},{value:6,label:"P\xE2teuse",color:"#e67e22"},{value:7,label:"Liquide",color:"#c0392b"}];select(e){this.scale.set(this.scale()===e?null:e);}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-bristol-scale-picker"]],inputs:{scale:[1,"scale"]},outputs:{scale:"scaleChange"},decls:7,vars:0,consts:()=>{let e;return e=" \xC9chelle de Bristol "+"\uFFFD#3\uFFFD"+"(optionnel \u2014 appuyez pour s\xE9lectionner)"+"\uFFFD/#3\uFFFD"+"",[e,[1,"bristol-picker"],[1,"bristol-picker__legend"],[1,"bristol-picker__hint"],["role","group",1,"bristol-picker__list"],["type","button",1,"bristol-picker__btn",3,"bristol-picker__btn--selected","--bristol-color"],["type","button",1,"bristol-picker__btn",3,"click"],["aria-hidden","true",1,"bristol-picker__swatch"],["aria-hidden","true",1,"bristol-picker__number"],[1,"bristol-picker__label"],["aria-hidden","true",1,"bristol-picker__indicator"]];},template:function(t,n){t&1&&(l(0,"fieldset",1)(1,"legend",2),z(2,0),X(3,"span",3),k(),s(),l(4,"div",4),x(5,$e,7,8,"button",5,Ae),s()()),t&2&&(i(5),A(n.options));},styles:['@charset "UTF-8";.bristol-picker[_ngcontent-%COMP%]{border:none;padding:0;margin:0}.bristol-picker__legend[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #666);margin-bottom:.5rem}.bristol-picker__hint[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400;color:var(--color-text-tertiary, #999)}.bristol-picker__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem}.bristol-picker__btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.75rem;width:100%;min-height:3rem;padding:.5rem .75rem;border:2px solid var(--color-border, #e0e0e0);border-radius:.5rem;background:var(--color-surface, #f9f9f9);cursor:pointer;text-align:left;transition:border-color .15s,background .15s}.bristol-picker__btn[_ngcontent-%COMP%]:hover{border-color:var(--bristol-color);background:color-mix(in srgb,var(--bristol-color) 8%,var(--color-surface, #f9f9f9))}.bristol-picker__btn[_ngcontent-%COMP%]:active{background:color-mix(in srgb,var(--bristol-color) 18%,var(--color-surface, #f9f9f9))}.bristol-picker__btn--selected[_ngcontent-%COMP%]{border-color:var(--bristol-color);background:color-mix(in srgb,var(--bristol-color) 12%,var(--color-surface, #f9f9f9))}.bristol-picker__btn--selected[_ngcontent-%COMP%]   .bristol-picker__indicator[_ngcontent-%COMP%]{background:var(--bristol-color);border-color:var(--bristol-color)}.bristol-picker__btn--selected[_ngcontent-%COMP%]   .bristol-picker__indicator[_ngcontent-%COMP%]:after{opacity:1}.bristol-picker__btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--bristol-color);outline-offset:2px}.bristol-picker__swatch[_ngcontent-%COMP%]{width:5px;height:2rem;border-radius:3px;background:var(--bristol-color);flex-shrink:0}.bristol-picker__number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;line-height:1;color:var(--bristol-color);width:1.5rem;flex-shrink:0;text-align:center}.bristol-picker__label[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:var(--color-text, #222)}.bristol-picker__indicator[_ngcontent-%COMP%]{position:relative;width:1.25rem;height:1.25rem;border:2px solid var(--color-border, #ccc);border-radius:50%;flex-shrink:0;transition:background .15s,border-color .15s}.bristol-picker__indicator[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:3px;border-radius:50%;background:#fff;opacity:0;transition:opacity .15s}'],changeDetection:0});};function Ye(o,e){if(o&1&&(l(0,"span",11),p(1),s()),o&2){let t=_().$implicit,n=_();i(),f(" \u{1F4CD} ",n.regionLabel(t.location.region)," ");}}function Le(o,e){if(o&1&&(l(0,"span",12),p(1),s()),o&2){let t=_().$implicit,n=_();i(),S(n.bristolLabel(t.bristolScale));}}function Ie(o,e){if(o&1&&(l(0,"span",13),p(1),s()),o&2){let t=_().$implicit;i(),S(t.note);}}function Fe(o,e){if(o&1&&(l(0,"li",6)(1,"span",8),p(2),s(),l(3,"span",9),p(4),s(),l(5,"span",10),p(6),s(),u(7,Ye,2,1,"span",11),u(8,Le,2,1,"span",12),u(9,Ie,2,1,"span",13),s()),o&2){let t=e.$implicit,n=_();i(2),S(n.typeIcon(t.type)),i(2),S(n.typeLabel(t.type)),i(),F("symptom-card__severity--low",t.severity<=3)("symptom-card__severity--medium",t.severity>=4&&t.severity<=6)("symptom-card__severity--high",t.severity>=7),N("aria-label","S\xE9v\xE9rit\xE9 "+t.severity+"/10"),i(),f(" ",t.severity,"/10 "),i(),E(t.location?7:-1),i(),E(t.bristolScale?8:-1),i(),E(t.note?9:-1);}}function De(o,e){o&1&&(l(0,"li",7),d(1,0),s());}var ze={pain:"Douleur",bloating:"Ballonnements",gas:"Gaz",belching:"\xC9ructations",stool:"Selles",headache:"Maux de t\xEAte",other:"Autre"},ke={pain:"\u{1F915}",bloating:"\u{1FAC3}",gas:"\u{1F4A8}",belching:"\u{1F62E}\u200D\u{1F4A8}",stool:"\u{1F6BD}",headache:"\u{1F92F}",other:"\u2753"},we={1:"Tr\xE8s dur",2:"Grumeleuse",3:"Craquel\xE9e",4:"Lisse",5:"Morceaux mous",6:"P\xE2teuse",7:"Liquide"},Ge={head:"T\xEAte",thorax:"Thorax","abdomen-upper":"Abdomen haut","abdomen-left":"Abdomen gauche","abdomen-right":"Abdomen droit","abdomen-lower":"Abdomen bas",pelvis:"Pelvis","left-arm":"Bras gauche","right-arm":"Bras droit","left-leg":"Jambe gauche","right-leg":"Jambe droite"},Q=class o{entry=q.required();deleted=V();_store=h(H);timeLabel=Y(()=>new Date(this.entry().timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}));typeLabel(e){return ze[e];}typeIcon(e){return ke[e];}bristolLabel(e){return`Bristol ${e} \u2013 ${we[e]}`;}regionLabel(e){return Ge[e]??e;}async onDelete(){try{await this._store.remove(this.entry().id),this.deleted.emit(this.entry().id);}catch(e){console.error("[SymptomEntryCard] Erreur lors de la suppression",e);}}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-symptom-entry-card"]],inputs:{entry:[1,"entry"]},outputs:{deleted:"deleted"},decls:10,vars:3,consts:()=>{let e;e="Supprimer cette saisie";let t;t="Sympt\xF4mes de cette saisie";let n;return n=" Aucun sympt\xF4me renseign\xE9 ",[n,[1,"symptom-card"],[1,"symptom-card__header"],[1,"symptom-card__time"],["type","button","aria-label",e,1,"symptom-card__delete-btn",3,"click"],["aria-label",t,1,"symptom-card__list"],[1,"symptom-card__item"],[1,"symptom-card__empty"],["aria-hidden","true",1,"symptom-card__icon"],[1,"symptom-card__type"],[1,"symptom-card__severity"],[1,"symptom-card__location"],[1,"symptom-card__bristol"],[1,"symptom-card__note"]];},template:function(t,n){t&1&&(l(0,"article",1)(1,"header",2)(2,"time",3),p(3),s(),l(4,"button",4),O("click",function(){return n.onDelete();}),p(5," \u2715 "),s()(),l(6,"ul",5),x(7,Fe,10,13,"li",6,B,!1,De,2,0,"li",7),s()()),t&2&&(i(2),N("datetime",n.entry().timestamp),i(),f(" ",n.timeLabel()," "),i(4),A(n.entry().symptoms));},styles:[".symptom-card[_ngcontent-%COMP%]{background:var(--color-surface, #fff);border:1px solid var(--color-border, #e0e0e0);border-radius:12px;padding:16px}.symptom-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.symptom-card__time[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary, #666);font-weight:500}.symptom-card__delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:var(--color-text-muted, #aaa);font-size:1rem;padding:4px 8px;border-radius:4px}.symptom-card__delete-btn[_ngcontent-%COMP%]:hover{color:var(--color-danger, #f44336);background:var(--color-danger-light, #fdecea)}.symptom-card__list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.symptom-card__item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.symptom-card__icon[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1}.symptom-card__type[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem}.symptom-card__severity[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;padding:2px 8px;border-radius:10px}.symptom-card__severity--low[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.symptom-card__severity--medium[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.symptom-card__severity--high[_ngcontent-%COMP%]{background:#fdecea;color:#c62828}.symptom-card__location[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary, #777);font-style:italic}.symptom-card__note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted, #999);font-style:italic;width:100%;padding-left:24px}.symptom-card__empty[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted, #bbb);font-style:italic}"],changeDetection:0});};var Be=(o,e)=>e.value;function Ue(o,e){if(o&1){let t=v();l(0,"button",2),O("click",function(){let r=C(t).$implicit,a=_();return P(a.select(r.value));}),l(1,"span",3),p(2),s(),l(3,"span",4),p(4),s()();}if(o&2){let t=e.$implicit,n=_();F("symptom-type-picker__chip--selected",n.selected()===t.value),N("aria-pressed",n.selected()===t.value)("aria-label",t.label),i(2),S(t.icon),i(2),S(t.label);}}var W=class o{selected=D.required();symptomTypes=[{value:"pain",label:"Douleur",icon:"\u{1F915}"},{value:"bloating",label:"Ballonnements",icon:"\u{1FAC3}"},{value:"gas",label:"Gaz",icon:"\u{1F4A8}"},{value:"belching",label:"\xC9ructations",icon:"\u{1F62E}\u200D\u{1F4A8}"},{value:"stool",label:"Selles",icon:"\u{1F6BD}"},{value:"headache",label:"Maux de t\xEAte",icon:"\u{1F92F}"},{value:"other",label:"Autre",icon:"\u2753"}];select(e){this.selected.set(e);}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-symptom-type-picker"]],inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange"},decls:3,vars:0,consts:()=>{let e;return e="Type de sympt\xF4me",[["role","group","aria-label",e,1,"symptom-type-picker"],["type","button",1,"symptom-type-picker__chip",3,"symptom-type-picker__chip--selected"],["type","button",1,"symptom-type-picker__chip",3,"click"],["aria-hidden","true",1,"symptom-type-picker__icon"],[1,"symptom-type-picker__label"]];},template:function(t,n){t&1&&(l(0,"div",0),x(1,Ue,5,6,"button",1,Be),s()),t&2&&(i(),A(n.symptomTypes));},styles:[".symptom-type-picker[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.symptom-type-picker__chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:1px solid var(--color-border, #ddd);border-radius:20px;background:var(--color-surface, #fff);font-size:.85rem;cursor:pointer;transition:background .15s,border-color .15s}.symptom-type-picker__chip--selected[_ngcontent-%COMP%]{background:var(--color-primary, #1976d2);border-color:var(--color-primary, #1976d2);color:#fff}.symptom-type-picker__icon[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1}.symptom-type-picker__label[_ngcontent-%COMP%]{font-weight:500}"],changeDetection:0});};var Xe=(o,e)=>e.id;function je(o,e){if(o&1){let t=v();c(0,"div",15)(1,"gt-bristol-scale-picker",30),R("scaleChange",function(r){C(t);let a=_();return P(a.onBristolScaleChange(r));}),m()();}if(o&2){let t=_();i(),$("scale",t.currentBristolScale());}}function Ve(o,e){if(o&1){let t=v();c(0,"div",15)(1,"span",16),z(2,5),U(3,"span",20),k(),m(),c(4,"gt-body-map",31),R("locationSelected",function(r){C(t);let a=_();return P(a.onLocationSelected(r));}),m()();}if(o&2){let t,n=_();i(4),$("selectedRegion",((t=n.currentLocation())==null?null:t.region)??null);}}function qe(o,e){if(o&1&&(c(0,"span",39),p(1),m()),o&2){let t=_().$implicit,n=_(2);i(),f(" \u{1F4CD} ",n.regionLabel(t.location.region)," ");}}function He(o,e){if(o&1&&(c(0,"span",40),p(1),m()),o&2){let t=_().$implicit,n=_(2);i(),f(" ",n.bristolLabel(t.bristolScale)," ");}}function Je(o,e){if(o&1){let t=v();c(0,"li",34)(1,"time",36),p(2),m(),c(3,"span",37),p(4),m(),c(5,"span",38),p(6),m(),u(7,qe,2,1,"span",39),u(8,He,2,1,"span",40),c(9,"button",41),R("click",function(){let r=C(t).$index,a=_(2);return P(a.removePendingSymptom(r));}),p(10," \u2715 "),m()();}if(o&2){let t=e.$implicit,n=_(2);i(2),f(" ",n.pendingTimeLabel(t.addedAt)," "),i(2),Ee(" ",n.typeIcon(t.type)," ",n.typeLabel(t.type)," "),i(2),f(" ",t.severity,"/10 "),i(),E(t.location?7:-1),i(),E(t.bristolScale?8:-1);}}function Ke(o,e){o&1&&(c(0,"span"),d(1,7),m());}function Ze(o,e){o&1&&(c(0,"span"),d(1,8),m());}function Qe(o,e){if(o&1){let t=v();c(0,"section",23)(1,"h2",32),d(2,6),m(),c(3,"ul",33),x(4,Je,11,6,"li",34,B),m(),c(6,"button",35),R("click",function(){C(t);let r=_();return P(r.saveEntry());}),u(7,Ke,2,0,"span")(8,Ze,2,0,"span"),m()();}if(o&2){let t=_();i(4),A(t.pendingSymptoms()),i(2),$("disabled",t.saving()),i(),E(t.saving()?7:8);}}function We(o,e){o&1&&(c(0,"p",27),d(1,9),m());}function et(o,e){o&1&&(c(0,"p",28),d(1,10),m());}function tt(o,e){if(o&1&&U(0,"gt-symptom-entry-card",42),o&2){let t=e.$implicit;$("entry",t);}}function nt(o,e){if(o&1&&(c(0,"div",29),x(1,tt,1,1,"gt-symptom-entry-card",42,Xe),m()),o&2){let t=_();i(),A(t.todayEntries());}}var ot={pain:"Douleur",bloating:"Ballonnements",gas:"Gaz",belching:"\xC9ructations",stool:"Selles",headache:"Maux de t\xEAte",other:"Autre"},it={pain:"\u{1F915}",bloating:"\u{1FAC3}",gas:"\u{1F4A8}",belching:"\u{1F62E}\u200D\u{1F4A8}",stool:"\u{1F6BD}",headache:"\u{1F92F}",other:"\u2753"},rt={1:"Tr\xE8s dur",2:"Grumeleuse",3:"Craquel\xE9e",4:"Lisse",5:"Morceaux mous",6:"P\xE2teuse",7:"Liquide"},at={head:"T\xEAte",thorax:"Thorax","abdomen-upper":"Abdomen haut","abdomen-left":"Abdomen gauche","abdomen-right":"Abdomen droit","abdomen-lower":"Abdomen bas",pelvis:"Pelvis","left-arm":"Bras gauche","right-arm":"Bras droit","left-leg":"Jambe gauche","right-leg":"Jambe droite"},Ce=class o{_store=h(H);_currentType=T("pain");_currentSeverity=T(5);_currentLocation=T(null);_currentNote=T("");_currentBristolScale=T(null);_pendingSymptoms=T([]);_saving=T(!1);currentType=this._currentType.asReadonly();currentSeverity=this._currentSeverity.asReadonly();currentLocation=this._currentLocation.asReadonly();currentNote=this._currentNote.asReadonly();currentBristolScale=this._currentBristolScale.asReadonly();pendingSymptoms=this._pendingSymptoms.asReadonly();saving=this._saving.asReadonly();loading=this._store.loading;todayEntries=this._store.todayEntries;canSave=Y(()=>this._pendingSymptoms().length>0);onTypeChange(e){this._currentType.set(e),e!=="pain"&&this._currentLocation.set(null),e!=="stool"&&this._currentBristolScale.set(null);}onBristolScaleChange(e){this._currentBristolScale.set(e);}onSeverityChange(e){this._currentSeverity.set(e);}onLocationSelected(e){this._currentLocation.set(e);}onNoteInput(e){this._currentNote.set(e.target.value);}typeLabel(e){return ot[e];}typeIcon(e){return it[e];}bristolLabel(e){return`Bristol ${e} \u2013 ${rt[e]}`;}regionLabel(e){return at[e]??e;}pendingTimeLabel(e){return new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});}addSymptom(){let e=this._currentType(),t={type:e,severity:this._currentSeverity(),location:e==="pain"?this._currentLocation()??void 0:void 0,note:this._currentNote().trim()||void 0,bristolScale:e==="stool"?this._currentBristolScale()??void 0:void 0,addedAt:new Date().toISOString()};this._pendingSymptoms.update(n=>[...n,t]),this._currentType.set("pain"),this._currentSeverity.set(5),this._currentLocation.set(null),this._currentNote.set(""),this._currentBristolScale.set(null);}removePendingSymptom(e){this._pendingSymptoms.update(t=>t.filter((n,r)=>r!==e));}onVoiceResult(e){e.data.symptoms.forEach(n=>{let r=[n.note,n.locationHint?`Zone : ${n.locationHint}`:null].filter(Boolean).join(" \u2014 ")||void 0;this._pendingSymptoms.update(a=>[...a,{type:n.type,severity:n.severity,note:r,addedAt:new Date().toISOString()}]);});}async saveEntry(){if(this.canSave()){this._saving.set(!0);try{let e={id:crypto.randomUUID(),timestamp:new Date().toISOString(),symptoms:this._pendingSymptoms().map(r=>{var a=r,{addedAt:t}=a,n=pe(a,["addedAt"]);return n;})};await this._store.add(e),this._pendingSymptoms.set([]);}catch(e){console.error("[SymptomEntryPage] Erreur lors de la sauvegarde",e);}finally{this._saving.set(!1);}}}static ɵfac=function(t){return new(t||o)();};static ɵcmp=b({type:o,selectors:[["gt-symptom-entry-page"]],decls:29,vars:8,consts:()=>{let e;e="Nouveau sympt\xF4me";let t;t="Note libre pour ce sympt\xF4me";let n;n="Pr\xE9cisions\u2026";let r;r="Sympt\xF4mes \xE0 enregistrer";let a;a="Journal des sympt\xF4mes du jour";let y;y=" Saisie des sympt\xF4mes ";let L;L=" Type de sympt\xF4me ";let M;M=" Note "+"\uFFFD#16\uFFFD"+"(optionnel)"+"\uFFFD/#16\uFFFD"+"";let oe;oe="+ Ajouter ce sympt\xF4me";let ie;ie=" Aujourd'hui ";let re;re=" Localisation "+"\uFFFD#3\uFFFD"+"(optionnel)"+"\uFFFD/#3\uFFFD"+"";let ae;ae=" \xC0 enregistrer ";let le;le="Retirer ce sympt\xF4me";let se;se="Enregistrement\u2026";let _e;_e="Enregistrer la saisie";let ce;ce="Chargement\u2026";let me;return me=" Aucun sympt\xF4me enregistr\xE9 aujourd'hui. ",[y,L,M,oe,ie,re,ae,se,_e,ce,me,[1,"symptom-entry-page"],[1,"symptom-entry-page__header"],[1,"symptom-entry-page__title"],["aria-label",e,1,"symptom-entry-page__form"],[1,"symptom-entry-page__field"],[1,"symptom-entry-page__field-label"],[3,"selectedChange","selected"],[3,"severityChange","severity"],["for","symptom-note",1,"symptom-entry-page__field-label"],[1,"symptom-entry-page__optional"],["id","symptom-note","type","text","aria-label",t,"placeholder",n,1,"symptom-entry-page__note-input",3,"input","value"],["type","button",1,"symptom-entry-page__add-btn",3,"click"],["aria-label",r,1,"symptom-entry-page__pending"],[3,"parseResultReady","context"],["aria-label",a,1,"symptom-entry-page__journal"],[1,"symptom-entry-page__journal-title"],[1,"symptom-entry-page__loading"],[1,"symptom-entry-page__empty"],[1,"symptom-entry-page__entries"],[3,"scaleChange","scale"],[3,"locationSelected","selectedRegion"],[1,"symptom-entry-page__pending-title"],[1,"symptom-entry-page__pending-list"],[1,"symptom-entry-page__pending-item"],["type","button",1,"symptom-entry-page__save-btn",3,"click","disabled"],[1,"symptom-entry-page__pending-time"],[1,"symptom-entry-page__pending-type"],[1,"symptom-entry-page__pending-severity"],[1,"symptom-entry-page__pending-location"],[1,"symptom-entry-page__pending-bristol"],["type","button","aria-label",le,1,"symptom-entry-page__pending-remove",3,"click"],[3,"entry"]];},template:function(t,n){t&1&&(c(0,"main",11)(1,"header",12)(2,"h1",13),d(3,0),m()(),c(4,"section",14)(5,"div",15)(6,"span",16),d(7,1),m(),c(8,"gt-symptom-type-picker",17),R("selectedChange",function(a){return n.onTypeChange(a);}),m()(),u(9,je,2,1,"div",15),c(10,"div",15)(11,"gt-severity-slider",18),R("severityChange",function(a){return n.onSeverityChange(a);}),m()(),u(12,Ve,5,1,"div",15),c(13,"div",15)(14,"label",19),z(15,2),U(16,"span",20),k(),m(),c(17,"input",21),R("input",function(a){return n.onNoteInput(a);}),m()(),c(18,"button",22),R("click",function(){return n.addSymptom();}),c(19,"span"),d(20,3),m()()(),u(21,Qe,9,2,"section",23),c(22,"gt-voice-input",24),R("parseResultReady",function(a){return n.onVoiceResult(a);}),m(),c(23,"section",25)(24,"h2",26),d(25,4),m(),u(26,We,2,0,"p",27)(27,et,2,0,"p",28)(28,nt,3,0,"div",29),m()()),t&2&&(i(8),$("selected",n.currentType()),i(),E(n.currentType()==="stool"?9:-1),i(2),$("severity",n.currentSeverity()),i(),E(n.currentType()==="pain"?12:-1),i(5),$("value",n.currentNote()),i(4),E(n.pendingSymptoms().length>0?21:-1),i(),$("context","symptom"),i(4),E(n.loading()?26:n.todayEntries().length===0?27:28));},dependencies:[J,Z,K,W,Q,be],styles:[".symptom-entry-page[_ngcontent-%COMP%]{padding:16px;max-width:640px;margin:0 auto;display:flex;flex-direction:column;gap:32px}.symptom-entry-page__header[_ngcontent-%COMP%]{padding-bottom:8px;border-bottom:1px solid var(--color-border, #e0e0e0)}.symptom-entry-page__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0}.symptom-entry-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.symptom-entry-page__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.symptom-entry-page__field-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-secondary, #555)}.symptom-entry-page__optional[_ngcontent-%COMP%]{font-weight:400;color:var(--color-text-muted, #999)}.symptom-entry-page__note-input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid var(--color-border, #ddd);border-radius:8px;font-size:1rem}.symptom-entry-page__note-input[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary, #1976d2);outline-offset:1px}.symptom-entry-page__add-btn[_ngcontent-%COMP%]{align-self:flex-start;padding:10px 20px;background:var(--color-surface, #fff);color:var(--color-primary, #1976d2);border:2px solid var(--color-primary, #1976d2);border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .15s}.symptom-entry-page__add-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-light, #e3f2fd)}.symptom-entry-page__pending[_ngcontent-%COMP%]{background:var(--color-surface-alt, #f9f9f9);border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px}.symptom-entry-page__pending-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0}.symptom-entry-page__pending-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.symptom-entry-page__pending-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.symptom-entry-page__pending-type[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.symptom-entry-page__pending-severity[_ngcontent-%COMP%]{font-size:.8rem;background:#f5f5f5;padding:2px 8px;border-radius:8px}.symptom-entry-page__pending-location[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted, #999);font-style:italic}.symptom-entry-page__pending-remove[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;cursor:pointer;color:var(--color-text-muted, #aaa);padding:2px 6px;border-radius:4px}.symptom-entry-page__pending-remove[_ngcontent-%COMP%]:hover{color:var(--color-danger, #f44336)}.symptom-entry-page__save-btn[_ngcontent-%COMP%]{align-self:flex-start;padding:12px 28px;background:var(--color-primary, #1976d2);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}.symptom-entry-page__save-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.symptom-entry-page__journal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.symptom-entry-page__journal-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0}.symptom-entry-page__loading[_ngcontent-%COMP%], .symptom-entry-page__empty[_ngcontent-%COMP%]{color:var(--color-text-muted, #999);font-style:italic;font-size:.9rem}.symptom-entry-page__entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}"],changeDetection:0});};export{Ce as SymptomEntryPageComponent};/**i18n:185be897c39810308387c12f12d03cfc55693f2502a2b367905371172c1f632a*/