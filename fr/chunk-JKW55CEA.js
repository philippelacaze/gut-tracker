import{a as me}from"./chunk-G2QOGHXP.js";import{a as Z}from"./chunk-HOZFZYOF.js";import"./chunk-VIQWMIXL.js";import"./chunk-FYP4C75K.js";import{b as ce}from"./chunk-JGYPQ263.js";import{a as X}from"./chunk-MSM4UX3L.js";import"./chunk-HYWRXIUD.js";import"./chunk-LNHMT4MH.js";import{$a as l,Bb as I,Cb as z,Eb as se,I as L,Ja as M,N as E,O,Pa as w,Qa as g,Ra as u,Ta as W,Ua as h,Va as v,Wa as $,Xa as c,Ya as s,Za as Y,_ as A,_a as d,ab as K,bb as S,cb as N,fb as m,gb as b,hb as C,ib as _,ob as ae,qb as U,sb as f,tb as R,ub as j,xa as J,yb as P,za as r,zb as le}from"./chunk-WRWDFJ7O.js";import{a as k,b as G}from"./chunk-4QSGCX7C.js";function ue(t,o){if(t&1&&(d(0,"span",2),f(1),l()),t&2){let e=_(2);r(),j("",e.score(),"/10");}}function fe(t,o){if(t&1&&(d(0,"span",1),f(1),g(2,ue,2,1,"span",2),l()),t&2){let e=_();U("fodmap-badge--low",e.level()==="low")("fodmap-badge--medium",e.level()==="medium")("fodmap-badge--high",e.level()==="high"),r(),j(" ",e.label()," "),r(),u(e.score()!==null?2:-1);}}var q=class t{level=z(null);score=z(null);label=P(()=>{switch(this.level()){case"low":return"Faible";case"medium":return"Mod\xE9r\xE9";case"high":return"\xC9lev\xE9";default:return null;}});static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-fodmap-badge"]],inputs:{level:[1,"level"],score:[1,"score"]},decls:1,vars:1,consts:[[1,"fodmap-badge",3,"fodmap-badge--low","fodmap-badge--medium","fodmap-badge--high"],[1,"fodmap-badge"],[1,"fodmap-badge__score"]],template:function(e,n){e&1&&g(0,fe,3,8,"span",0),e&2&&u(n.level()?0:-1);},styles:[".fodmap-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:20px;font-size:.72rem;font-weight:700;color:#fff;white-space:nowrap}.fodmap-badge--low[_ngcontent-%COMP%]{background:#4caf50}.fodmap-badge--medium[_ngcontent-%COMP%]{background:#ff9800}.fodmap-badge--high[_ngcontent-%COMP%]{background:#f44336}.fodmap-badge__score[_ngcontent-%COMP%]{opacity:.85;font-weight:400}"],changeDetection:0});};function Ee(t,o){if(t&1){let e=S();d(0,"div",10)(1,"button",12),C("click",function(){E(e),_();let i=ae(2);return O(i.click());}),d(2,"span",13),f(3,"\u{1F4F7}"),l(),d(4,"span"),m(5,2),l()(),d(6,"button",14),C("click",function(){E(e),_();let i=ae(4);return O(i.click());}),d(7,"span",13),f(8,"\u{1F5BC}\uFE0F"),l(),d(9,"span"),m(10,3),l()()();}if(t&2){let e=_();r(),N("disabled",e.analyzing()),r(5),N("disabled",e.analyzing());}}function Oe(t,o){t&1&&(d(0,"div",17),K(1,"div",19),d(2,"span"),m(3,4),l()());}function Ce(t,o){if(t&1){let e=S();d(0,"button",20),C("click",function(){E(e);let i=_(2);return O(i.reset());}),d(1,"span"),m(2,5),l()();}}function Te(t,o){if(t&1&&(d(0,"div",15),K(1,"img",16),g(2,Oe,4,0,"div",17),l(),g(3,Ce,3,0,"button",18)),t&2){let e=_();r(),N("src",e.previewUrl(),J),r(),u(e.analyzing()?2:-1),r(),u(e.analyzing()?-1:3);}}function ye(t,o){if(t&1){let e=S();d(0,"div",11)(1,"span"),f(2),l(),d(3,"button",21),C("click",function(){E(e);let i=_();return O(i.reset());}),m(4,6),l()();}if(t&2){let e=_();r(2),R(e.error());}}var ee=class t{_aiService=L(Z);_previewUrl=A(null);_error=A(null);previewUrl=this._previewUrl.asReadonly();error=this._error.asReadonly();analyzing=this._aiService.analyzing;analysisComplete=I();async onFileSelected(o){let e=o.target,n=e.files?.[0];if(!n)return;this._error.set(null);let i=await this._readFileAsBase64(n);this._previewUrl.set(`data:${n.type};base64,${i}`),e.value="",await this._analyze(i,n.type);}reset(){this._previewUrl.set(null),this._error.set(null);}_readFileAsBase64(o){return new Promise((e,n)=>{let i=new FileReader();i.onload=()=>{let a=i.result;e(a.split(",")[1]);},i.onerror=n,i.readAsDataURL(o);});}async _analyze(o,e){try{let n=await this._aiService.recognizeFood(o,e);this.analysisComplete.emit({photoUrl:this._previewUrl(),recognitionResult:n});}catch(n){n instanceof ce&&n.isQuotaError?this._error.set("Quota d\xE9pass\xE9. V\xE9rifiez vos param\xE8tres IA."):this._error.set(n instanceof Error?n.message:"Erreur lors de l'analyse.");}}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-food-camera"]],outputs:{analysisComplete:"analysisComplete"},decls:8,vars:3,consts:()=>{let o;o="Prendre une photo";let e;e="Depuis la galerie";let n;n="Photo s\xE9lectionn\xE9e";let i;i="Analyse en cours\u2026";let a;a="Changer de photo";let p;return p="R\xE9essayer",[["cameraInput",""],["galleryInput",""],o,e,i,a,p,[1,"food-camera"],["type","file","accept","image/jpeg,image/png,image/webp","capture","environment","aria-hidden","true","tabindex","-1",1,"food-camera__file-input",3,"change"],["type","file","accept","image/jpeg,image/png,image/webp","aria-hidden","true","tabindex","-1",1,"food-camera__file-input",3,"change"],[1,"food-camera__actions"],["role","alert",1,"food-camera__error"],["type","button",1,"food-camera__btn","food-camera__btn--camera",3,"click","disabled"],["aria-hidden","true",1,"food-camera__btn-icon"],["type","button",1,"food-camera__btn","food-camera__btn--gallery",3,"click","disabled"],[1,"food-camera__preview"],["alt",n,1,"food-camera__preview-img",3,"src"],["role","status","aria-live","polite",1,"food-camera__overlay"],["type","button",1,"food-camera__btn","food-camera__btn--retry"],["aria-hidden","true",1,"food-camera__spinner"],["type","button",1,"food-camera__btn","food-camera__btn--retry",3,"click"],["type","button",1,"food-camera__error-retry",3,"click"]];},template:function(e,n){if(e&1){let i=S();d(0,"div",7)(1,"input",8,0),C("change",function(p){return E(i),O(n.onFileSelected(p));}),l(),d(3,"input",9,1),C("change",function(p){return E(i),O(n.onFileSelected(p));}),l(),g(5,Ee,11,2,"div",10),g(6,Te,4,3),g(7,ye,5,1,"div",11),l();}e&2&&(r(5),u(n.previewUrl()?-1:5),r(),u(n.previewUrl()?6:-1),r(),u(n.error()?7:-1));},styles:[".food-camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.food-camera__file-input[_ngcontent-%COMP%]{display:none}.food-camera__actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.food-camera__btn[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1rem;border:2px dashed var(--color-border, #d1d5db);border-radius:.75rem;background:var(--color-surface, #f9fafb);color:var(--color-text, #374151);font-size:.9rem;font-weight:500;cursor:pointer;transition:border-color .2s,background .2s}.food-camera__btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--color-primary, #4f46e5);background:var(--color-primary-light, #eef2ff)}.food-camera__btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.food-camera__btn--retry[_ngcontent-%COMP%]{border-style:solid;flex:none;align-self:center;font-size:.8rem}.food-camera__btn-icon[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1}.food-camera__preview[_ngcontent-%COMP%]{position:relative;border-radius:.75rem;overflow:hidden;background:#000}.food-camera__preview-img[_ngcontent-%COMP%]{display:block;width:100%;max-height:320px;object-fit:cover}.food-camera__overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;background:#0009;color:#fff;font-size:.9rem}.food-camera__spinner[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.food-camera__error[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;padding:.75rem 1rem;border-radius:.5rem;background:var(--color-error-bg, #fef2f2);color:var(--color-error, #dc2626);font-size:.875rem}.food-camera__error-retry[_ngcontent-%COMP%]{padding:.25rem .75rem;border:1px solid currentcolor;border-radius:.375rem;background:transparent;color:inherit;font-size:.8rem;cursor:pointer;white-space:nowrap}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"],changeDetection:0});};var Se=(t,o)=>o.id;function Re(t,o){if(t&1&&Y(0,"gt-fodmap-badge",6),t&2){let e,n=_();$("level",n.globalFodmapLevel())("score",((e=n.entry().globalFodmapScore)==null?null:e.score)??null);}}function Fe(t,o){if(t&1&&(c(0,"span",13),f(1),s()),t&2){let e=_().$implicit;r(),R(e.quantity);}}function Me(t,o){if(t&1&&Y(0,"span",15),t&2){let e=_().$implicit;U("food-card__food-dot--low",e.fodmapScore.level==="low")("food-card__food-dot--medium",e.fodmapScore.level==="medium")("food-card__food-dot--high",e.fodmapScore.level==="high"),w("title",e.fodmapScore.details);}}function Ne(t,o){if(t&1&&(c(0,"li",9)(1,"span",12),f(2),s(),g(3,Fe,2,1,"span",13),g(4,Me,1,7,"span",14),s()),t&2){let e=o.$implicit;r(2),R(e.name),r(),u(e.quantity?3:-1),r(),u(e.fodmapScore?4:-1);}}function Pe(t,o){t&1&&(c(0,"li",10),m(1,0),s());}function be(t,o){if(t&1&&(c(0,"p",11),f(1),s()),t&2){let e=_();r(),R(e.entry().notes);}}var Ae={breakfast:"Petit-d\xE9jeuner",lunch:"D\xE9jeuner",dinner:"D\xEEner",snack:"Collation",drink:"Boisson"},oe=class t{entry=z.required();deleted=I();_store=L(X);mealTypeLabel=P(()=>Ae[this.entry().mealType]);timeLabel=P(()=>new Date(this.entry().timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}));globalFodmapLevel=P(()=>this.entry().globalFodmapScore?.level??null);async onDelete(){try{await this._store.remove(this.entry().id),this.deleted.emit(this.entry().id);}catch(o){console.error("[FoodEntryCard] Erreur lors de la suppression",o);}}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-food-entry-card"]],inputs:{entry:[1,"entry"]},outputs:{deleted:"deleted"},decls:15,vars:6,consts:()=>{let o;o="Supprimer cette saisie";let e;e="Aliments de cette saisie";let n;return n="Aucun aliment renseign\xE9",[n,[1,"food-card"],[1,"food-card__header"],[1,"food-card__meta"],[1,"food-card__meal-type"],[1,"food-card__time"],[3,"level","score"],["type","button","aria-label",o,1,"food-card__delete-btn",3,"click"],["aria-label",e,1,"food-card__foods"],[1,"food-card__food-item"],[1,"food-card__empty"],[1,"food-card__notes"],[1,"food-card__food-name"],[1,"food-card__food-qty"],[1,"food-card__food-dot",3,"food-card__food-dot--low","food-card__food-dot--medium","food-card__food-dot--high"],[1,"food-card__food-dot"]];},template:function(e,n){e&1&&(c(0,"article",1)(1,"header",2)(2,"div",3)(3,"span",4),f(4),s(),c(5,"time",5),f(6),s()(),g(7,Re,1,2,"gt-fodmap-badge",6),c(8,"button",7),b("click",function(){return n.onDelete();}),f(9," \u2715 "),s()(),c(10,"ul",8),h(11,Ne,5,3,"li",9,Se,!1,Pe,2,0,"li",10),s(),g(14,be,2,1,"p",11),s()),e&2&&(r(4),R(n.mealTypeLabel()),r(),w("datetime",n.entry().timestamp),r(),j(" ",n.timeLabel()," "),r(),u(n.globalFodmapLevel()?7:-1),r(4),v(n.entry().foods),r(3),u(n.entry().notes?14:-1));},dependencies:[q],styles:[".food-card[_ngcontent-%COMP%]{background:#fff;border:1.5px solid #e0e0e0;border-radius:12px;padding:12px 16px}.food-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.food-card__meta[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.food-card__meal-type[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;color:#212121}.food-card__time[_ngcontent-%COMP%]{font-size:.75rem;color:#757575}.food-card__delete-btn[_ngcontent-%COMP%]{background:transparent;border:none;padding:6px 8px;cursor:pointer;color:#bdbdbd;font-size:.85rem;border-radius:50%;line-height:1;transition:color .15s ease,background .15s ease}.food-card__delete-btn[_ngcontent-%COMP%]:hover{color:#f44336;background:#ffeaea}.food-card__delete-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #f44336;outline-offset:2px}.food-card__foods[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.food-card__food-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem}.food-card__food-name[_ngcontent-%COMP%]{flex:1;color:#333}.food-card__food-qty[_ngcontent-%COMP%]{color:#757575;font-size:.75rem}.food-card__food-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.food-card__food-dot--low[_ngcontent-%COMP%]{background:#4caf50}.food-card__food-dot--medium[_ngcontent-%COMP%]{background:#ff9800}.food-card__food-dot--high[_ngcontent-%COMP%]{background:#f44336}.food-card__empty[_ngcontent-%COMP%]{color:#bdbdbd;font-style:italic;font-size:.875rem}.food-card__notes[_ngcontent-%COMP%]{margin:10px 0 0;font-size:.8rem;color:#666;font-style:italic;border-top:1px solid #f5f5f5;padding-top:8px}"],changeDetection:0});};var he=(t,o)=>o.id;function ve(t,o){if(t&1&&K(0,"img",9),t&2){let e=_();N("src",e.photoUrl(),J);}}function xe(t,o){if(t&1&&(d(0,"li"),f(1),l()),t&2){let e=o.$implicit;r(),R(e);}}function De(t,o){if(t&1&&(d(0,"div",11)(1,"p"),m(2,4),l(),d(3,"ul",18),h(4,xe,2,1,"li",null,W),l()()),t&2){let e=_();r(4),v(e.result().uncertain);}}function $e(t,o){if(t&1){let e=S();d(0,"li",19)(1,"div",20)(2,"label",21),m(3,5),l(),d(4,"input",22),C("input",function(i){let a=E(e).$implicit,p=_(2);return O(p.updateFoodName(a.id,i.target.value));}),l(),d(5,"label",21),m(6,6),l(),d(7,"input",23),C("input",function(i){let a=E(e).$implicit,p=_(2);return O(p.updateFoodQuantity(a.id,i.target.value));}),l()(),d(8,"button",24),C("click",function(){let i=E(e).$implicit,a=_(2);return O(a.removeFood(i.id));}),f(9," \xD7 "),l()();}if(t&2){let e=o.$implicit;r(2),N("htmlFor","name-"+e.id),r(2),N("id","name-"+e.id)("value",e.name),r(),N("htmlFor","qty-"+e.id),r(2),N("id","qty-"+e.id)("value",e.quantity);}}function Ie(t,o){if(t&1&&(d(0,"ul",12),h(1,$e,10,6,"li",19,he),l()),t&2){let e=_();r(),v(e.editableFoods());}}function Le(t,o){t&1&&(d(0,"p",13),m(1,7),l());}var ne=class t{result=z.required();photoUrl=z(null);confirmed=I();cancelled=I();_editableFoods=le(()=>this.result().foods.map(o=>({id:crypto.randomUUID(),name:o.name,quantity:o.quantity??""})));editableFoods=this._editableFoods.asReadonly();hasValidItems=P(()=>this._editableFoods().some(o=>o.name.trim().length>0));updateFoodName(o,e){this._editableFoods.update(n=>n.map(i=>i.id===o?G(k({},i),{name:e}):i));}updateFoodQuantity(o,e){this._editableFoods.update(n=>n.map(i=>i.id===o?G(k({},i),{quantity:e}):i));}removeFood(o){this._editableFoods.update(e=>e.filter(n=>n.id!==o));}addFood(){this._editableFoods.update(o=>[...o,{id:crypto.randomUUID(),name:"",quantity:""}]);}confirm(){let o=this._editableFoods().filter(e=>e.name.trim().length>0).map(e=>({id:e.id,name:e.name.trim(),quantity:e.quantity.trim()||void 0,fodmapScore:null}));this.confirmed.emit(o);}cancel(){this.cancelled.emit();}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-food-recognition-result"]],inputs:{result:[1,"result"],photoUrl:[1,"photoUrl"]},outputs:{confirmed:"confirmed",cancelled:"cancelled"},decls:14,vars:4,consts:()=>{let o;o=" Aliments reconnus ";let e;e=" + Ajouter un aliment ";let n;n=" Annuler ";let i;i=" Valider ";let a;a="\xC9l\xE9ments incertains :";let p;p="Nom de l'aliment";let T;T="Quantit\xE9 (optionnel)";let F;F="Supprimer cet aliment";let y;y=" Nom de l'aliment ";let V;V=" Quantit\xE9 ";let Q;return Q=" Aucun aliment reconnu. Ajoutez-en manuellement. ",[o,e,n,i,a,y,V,Q,[1,"food-recognition-result"],["alt","","aria-hidden","true",1,"food-recognition-result__thumb",3,"src"],[1,"food-recognition-result__title"],["role","note",1,"food-recognition-result__uncertain"],["role","list",1,"food-recognition-result__list"],[1,"food-recognition-result__empty"],["type","button",1,"food-recognition-result__add",3,"click"],[1,"food-recognition-result__actions"],["type","button",1,"food-recognition-result__cancel",3,"click"],["type","button",1,"food-recognition-result__confirm",3,"click","disabled"],[1,"food-recognition-result__uncertain-list"],[1,"food-recognition-result__item"],[1,"food-recognition-result__fields"],[1,"visually-hidden",3,"for"],["type","text","placeholder",p,1,"food-recognition-result__input","food-recognition-result__input--name",3,"input","id","value"],["type","text","placeholder",T,1,"food-recognition-result__input","food-recognition-result__input--qty",3,"input","id","value"],["type","button","aria-label",F,1,"food-recognition-result__remove",3,"click"]];},template:function(e,n){e&1&&(d(0,"div",8),g(1,ve,1,1,"img",9),d(2,"h2",10),m(3,0),l(),g(4,De,6,0,"div",11),g(5,Ie,3,0,"ul",12)(6,Le,2,0,"p",13),d(7,"button",14),C("click",function(){return n.addFood();}),m(8,1),l(),d(9,"div",15)(10,"button",16),C("click",function(){return n.cancel();}),m(11,2),l(),d(12,"button",17),C("click",function(){return n.confirm();}),m(13,3),l()()()),e&2&&(r(),u(n.photoUrl()?1:-1),r(3),u(n.result().uncertain.length>0?4:-1),r(),u(n.editableFoods().length>0?5:6),r(7),N("disabled",!n.hasValidItems()));},styles:[".food-recognition-result[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.food-recognition-result__thumb[_ngcontent-%COMP%]{width:100%;max-height:160px;object-fit:cover;border-radius:.5rem}.food-recognition-result__title[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--color-text, #111827)}.food-recognition-result__uncertain[_ngcontent-%COMP%]{padding:.75rem;border-radius:.5rem;background:var(--color-warning-bg, #fffbeb);color:var(--color-warning, #92400e);font-size:.875rem}.food-recognition-result__uncertain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-weight:500}.food-recognition-result__uncertain-list[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem}.food-recognition-result__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:0;margin:0;list-style:none}.food-recognition-result__item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.food-recognition-result__fields[_ngcontent-%COMP%]{display:flex;flex:1;gap:.5rem}.food-recognition-result__input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:1px solid var(--color-border, #d1d5db);border-radius:.5rem;font-size:.9rem;outline:none;transition:border-color .15s}.food-recognition-result__input[_ngcontent-%COMP%]:focus{border-color:var(--color-primary, #4f46e5);box-shadow:0 0 0 3px var(--color-primary-ring, rgba(79, 70, 229, .2))}.food-recognition-result__input--qty[_ngcontent-%COMP%]{max-width:7rem;flex:0 0 7rem}.food-recognition-result__remove[_ngcontent-%COMP%]{flex-shrink:0;width:2rem;height:2rem;border:none;border-radius:50%;background:var(--color-error-bg, #fef2f2);color:var(--color-error, #dc2626);font-size:1.1rem;line-height:1;cursor:pointer;transition:background .15s}.food-recognition-result__remove[_ngcontent-%COMP%]:hover{background:var(--color-error, #dc2626);color:#fff}.food-recognition-result__empty[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--color-text-muted, #6b7280);text-align:center;padding:1rem 0}.food-recognition-result__add[_ngcontent-%COMP%]{align-self:flex-start;padding:.5rem 1rem;border:1px dashed var(--color-border, #d1d5db);border-radius:.5rem;background:transparent;color:var(--color-primary, #4f46e5);font-size:.875rem;cursor:pointer;transition:border-color .15s,background .15s}.food-recognition-result__add[_ngcontent-%COMP%]:hover{border-color:var(--color-primary, #4f46e5);background:var(--color-primary-light, #eef2ff)}.food-recognition-result__actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;padding-top:.5rem;border-top:1px solid var(--color-border, #e5e7eb)}.food-recognition-result__cancel[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border:1px solid var(--color-border, #d1d5db);border-radius:.5rem;background:transparent;color:var(--color-text, #374151);font-size:.9rem;cursor:pointer}.food-recognition-result__cancel[_ngcontent-%COMP%]:hover{background:var(--color-surface, #f9fafb)}.food-recognition-result__confirm[_ngcontent-%COMP%]{padding:.625rem 1.5rem;border:none;border-radius:.5rem;background:var(--color-primary, #4f46e5);color:#fff;font-size:.9rem;font-weight:500;cursor:pointer;transition:background .15s}.food-recognition-result__confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark, #4338ca)}.food-recognition-result__confirm[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}"],changeDetection:0});};function we(t,o){if(t&1){let e=S();d(0,"li",18),C("mousedown",function(i){let a=E(e).$implicit,p=_(2);return O(p.onSuggestionMousedown(i,a));}),f(1),l();}if(t&2){let e=o.$implicit;r(),j(" ",e," ");}}function ze(t,o){if(t&1&&(d(0,"ul",10),h(1,we,2,1,"li",17,W),l()),t&2){let e=_();r(),v(e.suggestions());}}var te=class t{foodAdded=I();foodAddedAndAnalyze=I();analyzing=z(!1);_store=L(X);_query=A("");_quantity=A("");_showSuggestions=A(!1);query=this._query.asReadonly();quantity=this._quantity.asReadonly();suggestions=P(()=>{let o=this._query().toLowerCase().trim();if(o.length<2)return[];let e=new Set();for(let n of this._store.entries())for(let i of n.foods)i.name.toLowerCase().includes(o)&&e.add(i.name);return[...e].slice(0,8);});showSuggestions=P(()=>this._showSuggestions()&&this.suggestions().length>0);onQueryInput(o){this._query.set(o.target.value),this._showSuggestions.set(!0);}onQuantityInput(o){this._quantity.set(o.target.value);}onFocus(){this._showSuggestions.set(!0);}onBlur(){this._showSuggestions.set(!1);}onSuggestionMousedown(o,e){o.preventDefault(),this._query.set(e),this._showSuggestions.set(!1);}addFood(){let o=this._buildFood();o&&(this.foodAdded.emit(o),this._resetInputs());}addFoodAndAnalyze(){let o=this._buildFood();o&&(this.foodAddedAndAnalyze.emit(o),this._resetInputs());}_buildFood(){let o=this._query().trim();return o?{id:crypto.randomUUID(),name:o,fodmapScore:null,quantity:this._quantity().trim()||void 0}:null;}_resetInputs(){this._query.set(""),this._quantity.set(""),this._showSuggestions.set(!1);}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-food-search"]],inputs:{analyzing:[1,"analyzing"]},outputs:{foodAdded:"foodAdded",foodAddedAndAnalyze:"foodAddedAndAnalyze"},decls:17,vars:6,consts:()=>{let o;o="Ex. : poulet, pain de seigle\u2026";let e;e="150 g, 1 bol\u2026";let n;n="Ajouter l'aliment \xE0 la liste";let i;i="Ajouter l'aliment et analyser son score FODMAP";let a;a=" Aliment ";let p;p=" Quantit\xE9 ";let T;T=" Ajouter ";let F;return F=" Ajouter et analyser ",[a,p,T,F,[1,"food-search"],[1,"food-search__inputs"],[1,"food-search__field","food-search__field--name"],["for","food-name",1,"food-search__label"],[1,"food-search__input-wrap"],["id","food-name","type","text","placeholder",o,"autocomplete","off","aria-autocomplete","list","aria-controls","food-suggestions",1,"food-search__input",3,"input","focus","blur","value"],["id","food-suggestions","role","listbox",1,"food-search__suggestions"],[1,"food-search__field","food-search__field--quantity"],["for","food-quantity",1,"food-search__label"],["id","food-quantity","type","text","placeholder",e,1,"food-search__input",3,"input","value"],[1,"food-search__actions"],["type","button","aria-label",n,1,"food-search__add-btn",3,"click","disabled"],["type","button","aria-label",i,1,"food-search__add-analyze-btn",3,"click","disabled"],["role","option",1,"food-search__suggestion"],["role","option",1,"food-search__suggestion",3,"mousedown"]];},template:function(e,n){e&1&&(d(0,"div",4)(1,"div",5)(2,"div",6)(3,"label",7),m(4,0),l(),d(5,"div",8)(6,"input",9),C("input",function(a){return n.onQueryInput(a);})("focus",function(){return n.onFocus();})("blur",function(){return n.onBlur();}),l(),g(7,ze,3,0,"ul",10),l()(),d(8,"div",11)(9,"label",12),m(10,1),l(),d(11,"input",13),C("input",function(a){return n.onQuantityInput(a);}),l()()(),d(12,"div",14)(13,"button",15),C("click",function(){return n.addFood();}),m(14,2),l(),d(15,"button",16),C("click",function(){return n.addFoodAndAnalyze();}),m(16,3),l()()()),e&2&&(r(6),N("value",n.query()),w("aria-expanded",n.showSuggestions()),r(),u(n.showSuggestions()?7:-1),r(4),N("value",n.quantity()),r(2),N("disabled",!n.query().trim()),r(2),N("disabled",!n.query().trim()||n.analyzing()));},styles:[".food-search[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.food-search__inputs[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-end}.food-search__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.food-search__field--name[_ngcontent-%COMP%]{flex:2}.food-search__field--quantity[_ngcontent-%COMP%]{flex:1}.food-search__input-wrap[_ngcontent-%COMP%]{position:relative}.food-search__label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#555}.food-search__input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:.9rem;outline:none;box-sizing:border-box;transition:border-color .15s ease}.food-search__input[_ngcontent-%COMP%]:focus{border-color:#4caf50}.food-search__suggestions[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;background:#fff;border:1.5px solid #e0e0e0;border-radius:8px;list-style:none;margin:0;padding:4px 0;z-index:100;box-shadow:0 4px 12px #0000001a;max-height:200px;overflow-y:auto}.food-search__suggestion[_ngcontent-%COMP%]{padding:10px 12px;cursor:pointer;font-size:.9rem}.food-search__suggestion[_ngcontent-%COMP%]:hover{background:#f5f5f5}.food-search__actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.food-search__add-btn[_ngcontent-%COMP%]{flex:1 1 0;padding:12px;background:#4caf50;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .15s ease}.food-search__add-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed}.food-search__add-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#388e3c}.food-search__add-btn[_ngcontent-%COMP%]:not(:disabled):focus-visible{outline:2px solid #388e3c;outline-offset:2px}.food-search__add-analyze-btn[_ngcontent-%COMP%]{flex:1 1 0;padding:12px;background:#1976d2;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .15s ease}.food-search__add-analyze-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed}.food-search__add-analyze-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#1565c0}.food-search__add-analyze-btn[_ngcontent-%COMP%]:not(:disabled):focus-visible{outline:2px solid #1565c0;outline-offset:2px}"],changeDetection:0});};var Ue=(t,o)=>o.value;function ke(t,o){if(t&1){let e=S();d(0,"button",2),C("click",function(){let i=E(e).$implicit,a=_();return O(a.select(i.value));}),d(1,"span",3),f(2),l(),d(3,"span",4),f(4),l()();}if(t&2){let e=o.$implicit,n=_();U("meal-type-picker__chip--selected",n.selected()===e.value),w("aria-pressed",n.selected()===e.value)("aria-label",e.label),r(2),R(e.icon),r(2),R(e.label);}}var ie=class t{selected=se.required();mealTypes=[{value:"breakfast",label:"Petit-d\xE9jeuner",icon:"\u{1F305}"},{value:"lunch",label:"D\xE9jeuner",icon:"\u2600\uFE0F"},{value:"dinner",label:"D\xEEner",icon:"\u{1F319}"},{value:"snack",label:"Collation",icon:"\u{1F34E}"},{value:"drink",label:"Boisson",icon:"\u{1F4A7}"}];select(o){this.selected.set(o);}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-meal-type-picker"]],inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange"},decls:3,vars:0,consts:()=>{let o;return o="Type de repas",[["role","group","aria-label",o,1,"meal-type-picker"],["type","button",1,"meal-type-picker__chip",3,"meal-type-picker__chip--selected"],["type","button",1,"meal-type-picker__chip",3,"click"],["aria-hidden","true",1,"meal-type-picker__icon"],[1,"meal-type-picker__label"]];},template:function(e,n){e&1&&(d(0,"div",0),h(1,ke,5,6,"button",1,Ue),l()),e&2&&(r(),v(n.mealTypes));},styles:[".meal-type-picker[_ngcontent-%COMP%]{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none}.meal-type-picker[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.meal-type-picker__chip[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 14px;border:2px solid #e0e0e0;border-radius:12px;background:transparent;cursor:pointer;white-space:nowrap;transition:border-color .15s ease,background .15s ease;min-width:68px}.meal-type-picker__chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4caf50;outline-offset:2px}.meal-type-picker__chip--selected[_ngcontent-%COMP%]{border-color:#4caf50;background:#e8f5e9}.meal-type-picker__icon[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1}.meal-type-picker__label[_ngcontent-%COMP%]{font-size:.7rem;color:#424242}"],changeDetection:0});};var Ge=(t,o)=>o.id;function Ye(t,o){if(t&1&&Y(0,"gt-fodmap-badge",7),t&2){let e=_().$implicit;$("level",e.fodmapScore.level);}}function Xe(t,o){if(t&1){let e=S();c(0,"li",4)(1,"button",5),b("click",function(){let i=E(e).$implicit,a=_(2);return O(a.selectFood(i));}),c(2,"span",6),f(3),s(),g(4,Ye,1,1,"gt-fodmap-badge",7),s()();}if(t&2){let e=o.$implicit;r(3),R(e.name),r(),u(e.fodmapScore?4:-1);}}function qe(t,o){if(t&1&&(c(0,"section",1)(1,"h3",2),m(2,0),s(),c(3,"ul",3),h(4,Xe,5,2,"li",4,Ge),s()()),t&2){let e=_();r(4),v(e.recentFoods());}}var re=class t{_store=L(X);foodSelected=I();recentFoods=P(()=>{let o=this._store.frequentFoods(),e=this._store.entries().flatMap(n=>n.foods);return o.map(n=>{let i=e.filter(a=>a.name===n).at(-1);return{id:n,name:n,fodmapScore:i?.fodmapScore??null};});});hasRecentFoods=P(()=>this.recentFoods().length>0);selectFood(o){this.foodSelected.emit(G(k({},o),{id:crypto.randomUUID()}));}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-recent-foods"]],outputs:{foodSelected:"foodSelected"},decls:1,vars:1,consts:()=>{let o;return o=" Aliments fr\xE9quents ",[o,["aria-labelledby","recent-foods-title",1,"recent-foods"],["id","recent-foods-title",1,"recent-foods__title"],["role","list",1,"recent-foods__list"],[1,"recent-foods__item"],["type","button",1,"recent-foods__chip",3,"click"],[1,"recent-foods__chip-name"],[3,"level"]];},template:function(e,n){e&1&&g(0,qe,6,0,"section",1),e&2&&u(n.hasRecentFoods()?0:-1);},dependencies:[q],styles:[".recent-foods[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.recent-foods__title[_ngcontent-%COMP%]{margin:0;font-size:.8rem;font-weight:600;color:#757575;text-transform:uppercase;letter-spacing:.04em}.recent-foods__list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding:0;margin:0;list-style:none}.recent-foods__item[_ngcontent-%COMP%]{display:contents}.recent-foods__chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border:1.5px solid #e0e0e0;border-radius:20px;background:#fff;color:#333;font-size:.875rem;cursor:pointer;transition:border-color .15s,background .15s}.recent-foods__chip[_ngcontent-%COMP%]:hover{border-color:#4caf50;background:#f1f8e9}.recent-foods__chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4caf50;outline-offset:2px}.recent-foods__chip-name[_ngcontent-%COMP%]{font-weight:500}"],changeDetection:0});};var ge=(t,o)=>o.id;function Ve(t,o){if(t&1){let e=S();c(0,"gt-food-recognition-result",29),b("confirmed",function(i){E(e);let a=_(2);return O(a.onRecognitionConfirmed(i));})("cancelled",function(){E(e);let i=_(2);return O(i.onRecognitionCancelled());}),s();}if(t&2){let e=o;$("result",e.recognitionResult)("photoUrl",e.photoUrl);}}function je(t,o){if(t&1){let e=S();c(0,"gt-food-camera",30),b("analysisComplete",function(i){E(e);let a=_(2);return O(a.onRecognitionComplete(i));}),s();}}function He(t,o){if(t&1&&g(0,Ve,1,2,"gt-food-recognition-result",28)(1,je,1,0,"gt-food-camera"),t&2){let e,n=_();u((e=n.recognitionResult())?0:1,e);}}function Be(t,o){if(t&1){let e=S();c(0,"gt-food-search",31),b("foodAdded",function(i){E(e);let a=_();return O(a.onFoodAdded(i));})("foodAddedAndAnalyze",function(i){E(e);let a=_();return O(a.onFoodAddedAndAnalyze(i));}),s();}if(t&2){let e=_();$("analyzing",e.aiAnalyzing());}}function Qe(t,o){if(t&1&&(c(0,"span",34),f(1),s()),t&2){let e=_().$implicit;r(),R(e.quantity);}}function Ke(t,o){t&1&&(c(0,"span",35),m(1,4),s());}function Je(t,o){if(t&1&&Y(0,"gt-fodmap-badge",36),t&2){let e=_().$implicit;$("level",e.fodmapScore.level)("score",e.fodmapScore.score);}}function We(t,o){if(t&1){let e=S();c(0,"li",32)(1,"span",33),f(2),s(),g(3,Qe,2,1,"span",34),g(4,Ke,2,0,"span",35)(5,Je,1,2,"gt-fodmap-badge",36),c(6,"button",37),b("click",function(){let i=E(e).$implicit,a=_(2);return O(a.removePendingFood(i.id));}),f(7," \u2715 "),s()();}if(t&2){let e=o.$implicit,n=_(2);r(2),R(e.name),r(),u(e.quantity?3:-1),r(),u(n.analyzingFoodIds().has(e.id)?4:e.fodmapScore?5:-1);}}function Ze(t,o){if(t&1&&(c(0,"ul",20),h(1,We,8,3,"li",32,ge),s()),t&2){let e=_();r(),v(e.pendingFoods());}}function eo(t,o){t&1&&(c(0,"span"),m(1,5),s());}function oo(t,o){t&1&&(c(0,"span"),m(1,6),s());}function no(t,o){t&1&&(c(0,"span"),m(1,7),s());}function to(t,o){t&1&&(c(0,"p",25),m(1,8),s());}function io(t,o){t&1&&(c(0,"p",26),m(1,9),s());}function ro(t,o){if(t&1&&Y(0,"gt-food-entry-card",38),t&2){let e=o.$implicit;$("entry",e);}}function ao(t,o){if(t&1&&(c(0,"div",27),h(1,ro,1,1,"gt-food-entry-card",38,ge),s()),t&2){let e=_();r(),v(e.todayEntries());}}function _o(){let t=new Date().getHours();return t<10?"breakfast":t<14?"lunch":t<17?"snack":t<21?"dinner":"snack";}var pe=class t{_store=L(X);_aiService=L(Z);_selectedMealType=A(_o());_pendingFoods=A([]);_saving=A(!1);_entryMode=A("manual");_recognitionResult=A(null);_analyzingFoodIds=A(new Set());selectedMealType=this._selectedMealType.asReadonly();pendingFoods=this._pendingFoods.asReadonly();saving=this._saving.asReadonly();entryMode=this._entryMode.asReadonly();recognitionResult=this._recognitionResult.asReadonly();analyzingFoodIds=this._analyzingFoodIds.asReadonly();loading=this._store.loading;todayEntries=this._store.todayEntries;aiAnalyzing=this._aiService.analyzing;canSave=P(()=>this._pendingFoods().length>0);setEntryMode(o){this._entryMode.set(o),this._recognitionResult.set(null);}onMealTypeChange(o){this._selectedMealType.set(o);}onFoodAdded(o){this._pendingFoods.update(e=>[...e,o]);}async onFoodAddedAndAnalyze(o){this._pendingFoods.update(e=>[...e,o]),this._analyzingFoodIds.update(e=>new Set([...e,o.id]));try{let e=await this._aiService.analyzeFodmap([o.name]),n=new Date().toISOString(),i=e.foods.find(a=>a.name.toLowerCase()===o.name.toLowerCase());if(i){let a=G(k({},o),{fodmapScore:{level:i.fodmapLevel,score:i.score,details:[i.mainFodmaps.join(", "),i.notes].filter(Boolean).join(" \u2014 "),analyzedAt:n}});this._pendingFoods.update(p=>p.map(T=>T.id===o.id?a:T));}}catch{}finally{this._analyzingFoodIds.update(e=>{let n=new Set(e);return n.delete(o.id),n;});}}onRecognitionComplete(o){this._recognitionResult.set(o);}onRecognitionConfirmed(o){this._pendingFoods.update(e=>[...e,...o]),this._recognitionResult.set(null),this._entryMode.set("manual");}onRecognitionCancelled(){this._recognitionResult.set(null);}removePendingFood(o){this._pendingFoods.update(e=>e.filter(n=>n.id!==o));}onVoiceResult(o){let e=o.data;e.mealType&&this._selectedMealType.set(e.mealType),e.foods.forEach(n=>this._pendingFoods.update(i=>[...i,{id:crypto.randomUUID(),name:n.name,fodmapScore:null,quantity:n.quantity??void 0}]));}async saveEntry(){if(this.canSave()){this._saving.set(!0);try{let o=this._pendingFoods(),e="",n=o.filter(p=>p.fodmapScore===null);if(n.length>0)try{let p=await this._aiService.analyzeFodmap(n.map(F=>F.name)),T=new Date().toISOString();o=o.map(F=>{if(F.fodmapScore!==null)return F;let y=p.foods.find(V=>V.name.toLowerCase()===F.name.toLowerCase());return y?G(k({},F),{fodmapScore:{level:y.fodmapLevel,score:y.score,details:[y.mainFodmaps.join(", "),y.notes].filter(Boolean).join(" \u2014 "),analyzedAt:T}}):F;}),e=p.advice;}catch{}let i=this._buildGlobalScore(o,e),a={id:crypto.randomUUID(),timestamp:new Date().toISOString(),mealType:this._selectedMealType(),foods:o,globalFodmapScore:i};await this._store.add(a),this._pendingFoods.set([]);}catch(o){console.error("[FoodEntryPage] Erreur lors de la sauvegarde",o);}finally{this._saving.set(!1);}}}_buildGlobalScore(o,e){let n=o.filter(p=>p.fodmapScore!==null);if(n.length===0)return;let i=Math.round(n.reduce((p,T)=>p+T.fodmapScore.score,0)/n.length);return{level:i<=3?"low":i<=6?"medium":"high",score:i,details:e,analyzedAt:new Date().toISOString()};}static ɵfac=function(e){return new(e||t)();};static ɵcmp=M({type:t,selectors:[["gt-food-entry-page"]],decls:32,vars:13,consts:()=>{let o;o="Nouvelle saisie";let e;e="Aliments \xE0 enregistrer";let n;n="Journal du jour";let i;i="Saisie alimentaire v1.3";let a;a="Manuel";let p;p="Photo";let T;T=" Journal du jour ";let F;F="Retirer l'aliment";let y;y=" Analyse\u2026 ";let V;V="Analyse FODMAP\u2026";let Q;Q="Enregistrement\u2026";let x;x="Enregistrer le repas";let de;de="Chargement\u2026";let _e;return _e=" Aucune saisie aujourd'hui. Commencez par ajouter un repas. ",[i,a,p,T,y,V,Q,x,de,_e,[1,"food-entry-page"],[1,"food-entry-page__header"],[1,"food-entry-page__title"],["aria-label",o,1,"food-entry-page__form"],[3,"selectedChange","selected"],[3,"foodSelected"],["role","tablist",1,"food-entry-page__mode-tabs"],["type","button","role","tab",1,"food-entry-page__mode-tab",3,"click"],["aria-hidden","true"],[3,"analyzing"],["aria-label",e,1,"food-entry-page__pending"],["type","button",1,"food-entry-page__save-btn",3,"click","disabled"],[3,"parseResultReady","context"],["aria-label",n,1,"food-entry-page__journal"],[1,"food-entry-page__journal-title"],[1,"food-entry-page__loading"],[1,"food-entry-page__empty"],[1,"food-entry-page__entries"],[3,"result","photoUrl"],[3,"confirmed","cancelled","result","photoUrl"],[3,"analysisComplete"],[3,"foodAdded","foodAddedAndAnalyze","analyzing"],[1,"food-entry-page__pending-item"],[1,"food-entry-page__pending-name"],[1,"food-entry-page__pending-qty"],[1,"food-entry-page__pending-analyzing"],[3,"level","score"],["type","button","aria-label",F,1,"food-entry-page__pending-remove",3,"click"],[3,"entry"]];},template:function(e,n){e&1&&(c(0,"main",10)(1,"header",11)(2,"h1",12),m(3,0),s()(),c(4,"section",13)(5,"gt-meal-type-picker",14),b("selectedChange",function(a){return n.onMealTypeChange(a);}),s(),c(6,"gt-recent-foods",15),b("foodSelected",function(a){return n.onFoodAdded(a);}),s(),c(7,"div",16)(8,"button",17),b("click",function(){return n.setEntryMode("manual");}),c(9,"span",18),f(10,"\u270F\uFE0F"),s(),c(11,"span"),m(12,1),s()(),c(13,"button",17),b("click",function(){return n.setEntryMode("camera");}),c(14,"span",18),f(15,"\u{1F4F7}"),s(),c(16,"span"),m(17,2),s()()(),g(18,He,2,1)(19,Be,1,1,"gt-food-search",19),g(20,Ze,3,0,"ul",20),c(21,"button",21),b("click",function(){return n.saveEntry();}),g(22,eo,2,0,"span")(23,oo,2,0,"span")(24,no,2,0,"span"),s()(),c(25,"gt-voice-input",22),b("parseResultReady",function(a){return n.onVoiceResult(a);}),s(),c(26,"section",23)(27,"h2",24),m(28,3),s(),g(29,to,2,0,"p",25)(30,io,2,0,"p",26)(31,ao,3,0,"div",27),s()()),e&2&&(r(5),$("selected",n.selectedMealType()),r(3),U("food-entry-page__mode-tab--active",n.entryMode()==="manual"),w("aria-selected",n.entryMode()==="manual"),r(5),U("food-entry-page__mode-tab--active",n.entryMode()==="camera"),w("aria-selected",n.entryMode()==="camera"),r(5),u(n.entryMode()==="camera"?18:19),r(2),u(n.pendingFoods().length>0?20:-1),r(),$("disabled",!n.canSave()||n.saving()),r(),u(n.aiAnalyzing()?22:n.saving()?23:24),r(3),$("context","food"),r(4),u(n.loading()?29:n.todayEntries().length===0?30:31));},dependencies:[ie,te,ee,ne,oe,re,me,q],styles:[".food-entry-page[_ngcontent-%COMP%]{max-width:640px;margin:0 auto;padding:16px;display:flex;flex-direction:column;gap:24px}.food-entry-page__title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:800;color:#212121;margin:0}.food-entry-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;background:#fafafa;border:1.5px solid #eeeeee;border-radius:16px;padding:16px}.food-entry-page__pending[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.food-entry-page__pending-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#fff;border:1.5px solid #e0e0e0;border-radius:8px;font-size:.875rem}.food-entry-page__pending-name[_ngcontent-%COMP%]{flex:1;font-weight:500}.food-entry-page__pending-qty[_ngcontent-%COMP%]{color:#757575;font-size:.75rem}.food-entry-page__pending-analyzing[_ngcontent-%COMP%]{font-size:.75rem;color:#1976d2;font-style:italic;animation:_ngcontent-%COMP%_pending-analyzing-pulse 1.2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pending-analyzing-pulse{0%,to{opacity:1}50%{opacity:.35}}.food-entry-page__pending-remove[_ngcontent-%COMP%]{background:transparent;border:none;padding:2px 6px;cursor:pointer;color:#bdbdbd;font-size:.8rem;border-radius:4px;transition:color .15s ease}.food-entry-page__pending-remove[_ngcontent-%COMP%]:hover{color:#f44336}.food-entry-page__save-btn[_ngcontent-%COMP%]{padding:14px;background:#4caf50;color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:background .15s ease}.food-entry-page__save-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed}.food-entry-page__save-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#388e3c}.food-entry-page__save-btn[_ngcontent-%COMP%]:not(:disabled):focus-visible{outline:2px solid #388e3c;outline-offset:2px}.food-entry-page__mode-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;border-bottom:1.5px solid #e0e0e0;padding-bottom:0}.food-entry-page__mode-tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-bottom:2.5px solid transparent;background:transparent;font-size:.875rem;font-weight:500;color:#757575;cursor:pointer;margin-bottom:-1.5px;border-radius:4px 4px 0 0;transition:color .15s ease,border-color .15s ease}.food-entry-page__mode-tab[_ngcontent-%COMP%]:hover{color:#424242}.food-entry-page__mode-tab--active[_ngcontent-%COMP%]{color:#4caf50;border-bottom-color:#4caf50;font-weight:700}.food-entry-page__mode-tab[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4caf50;outline-offset:2px}.food-entry-page__journal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.food-entry-page__journal-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#424242;margin:0}.food-entry-page__entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.food-entry-page__loading[_ngcontent-%COMP%], .food-entry-page__empty[_ngcontent-%COMP%]{color:#9e9e9e;font-size:.9rem;font-style:italic;text-align:center;padding:24px 0}"],changeDetection:0});};export{pe as FoodEntryPageComponent};/**i18n:185be897c39810308387c12f12d03cfc55693f2502a2b367905371172c1f632a*/